function cov_zwguhcr6(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/update-project.js";var hash="3c99a12dafac34a35ee68b07f185f5dbcf11bc09";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/update-project.js",statementMap:{"0":{start:{line:1,column:32},end:{line:1,column:56}},"1":{start:{line:4,column:22},end:{line:28,column:1}},"2":{start:{line:7,column:4},end:{line:27,column:8}},"3":{start:{line:8,column:22},end:{line:8,column:55}},"4":{start:{line:11,column:8},end:{line:11,column:58}},"5":{start:{line:11,column:22},end:{line:11,column:58}},"6":{start:{line:14,column:8},end:{line:14,column:80}},"7":{start:{line:14,column:47},end:{line:14,column:80}},"8":{start:{line:16,column:8},end:{line:16,column:100}},"9":{start:{line:19,column:8},end:{line:19,column:43}},"10":{start:{line:21,column:8},end:{line:21,column:26}},"11":{start:{line:22,column:8},end:{line:22,column:26}},"12":{start:{line:24,column:8},end:{line:24,column:22}},"13":{start:{line:30,column:0},end:{line:30,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:47},end:{line:28,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:7,column:12},end:{line:7,column:13}},loc:{start:{line:7,column:24},end:{line:27,column:5}},line:7}},branchMap:{"0":{loc:{start:{line:11,column:8},end:{line:11,column:58}},type:"if",locations:[{start:{line:11,column:8},end:{line:11,column:58}},{start:{line:11,column:8},end:{line:11,column:58}}],line:11},"1":{loc:{start:{line:14,column:8},end:{line:14,column:80}},type:"if",locations:[{start:{line:14,column:8},end:{line:14,column:80}},{start:{line:14,column:8},end:{line:14,column:80}}],line:14}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3c99a12dafac34a35ee68b07f185f5dbcf11bc09"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_zwguhcr6=function(){return actualCoverage;};}return actualCoverage;}cov_zwguhcr6();const{models:{Project}}=(cov_zwguhcr6().s[0]++,require('serntask-data'));cov_zwguhcr6().s[1]++;const updateProject=(id,projectId,name)=>{cov_zwguhcr6().f[0]++;cov_zwguhcr6().s[2]++;return(async()=>{cov_zwguhcr6().f[1]++;let project=(cov_zwguhcr6().s[3]++,await Project.findById(projectId));// existe proyecto
cov_zwguhcr6().s[4]++;if(!project){cov_zwguhcr6().b[0][0]++;cov_zwguhcr6().s[5]++;throw new Error('Project not found');}else{cov_zwguhcr6().b[0][1]++;}// el usuario es el mismo que el autenticado
cov_zwguhcr6().s[6]++;if(project.creator.toString()!==id){cov_zwguhcr6().b[1][0]++;cov_zwguhcr6().s[7]++;throw new Error('Not authorized');}else{cov_zwguhcr6().b[1][1]++;}//ObjectId
cov_zwguhcr6().s[8]++;project=await Project.findByIdAndUpdate({_id:projectId},{name},{new:true}).lean();// sanitize
cov_zwguhcr6().s[9]++;project.id=project._id.toString();cov_zwguhcr6().s[10]++;delete project._id;cov_zwguhcr6().s[11]++;delete project.__v;cov_zwguhcr6().s[12]++;return project;})();};cov_zwguhcr6().s[13]++;module.exports=updateProject;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS1wcm9qZWN0LmpzIl0sIm5hbWVzIjpbIm1vZGVscyIsIlByb2plY3QiLCJyZXF1aXJlIiwidXBkYXRlUHJvamVjdCIsImlkIiwicHJvamVjdElkIiwibmFtZSIsInByb2plY3QiLCJmaW5kQnlJZCIsIkVycm9yIiwiY3JlYXRvciIsInRvU3RyaW5nIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJfaWQiLCJuZXciLCJsZWFuIiwiX192IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjBxRUFlWTt1RkFmWixLQUFNLENBQUVBLE1BQU0sQ0FBRSxDQUFFQyxPQUFGLENBQVYseUJBQTBCQyxPQUFPLENBQUMsZUFBRCxDQUFqQyxDQUFOLEMsc0JBR0EsS0FBTUMsQ0FBQUEsYUFBYSxDQUFHLENBQUNDLEVBQUQsQ0FBS0MsU0FBTCxDQUFnQkMsSUFBaEIsR0FBeUIsNkNBRzNDLE1BQU8sQ0FBQyxTQUFZLHVCQUNoQixHQUFJQyxDQUFBQSxPQUFPLHdCQUFHLEtBQU1OLENBQUFBLE9BQU8sQ0FBQ08sUUFBUixDQUFpQkgsU0FBakIsQ0FBVCxDQUFYLENBRUE7QUFIZ0Isc0JBSWhCLEdBQUksQ0FBQ0UsT0FBTCxDQUFjLHFEQUFNLElBQUlFLENBQUFBLEtBQUosQ0FBVSxtQkFBVixDQUFOLENBQW9DLENBQWxELCtCQUVBO0FBTmdCLHNCQU9oQixHQUFJRixPQUFPLENBQUNHLE9BQVIsQ0FBZ0JDLFFBQWhCLEtBQStCUCxFQUFuQyxDQUF1QyxxREFBTSxJQUFJSyxDQUFBQSxLQUFKLENBQVUsZ0JBQVYsQ0FBTixDQUFpQyxDQUF4RSwrQkFBMEU7QUFQMUQsc0JBU2hCRixPQUFPLENBQUcsS0FBTU4sQ0FBQUEsT0FBTyxDQUFDVyxpQkFBUixDQUEwQixDQUFFQyxHQUFHLENBQUVSLFNBQVAsQ0FBMUIsQ0FBOEMsQ0FBRUMsSUFBRixDQUE5QyxDQUF3RCxDQUFDUSxHQUFHLENBQUUsSUFBTixDQUF4RCxFQUFzRUMsSUFBdEUsRUFBaEIsQ0FFQTtBQVhnQixzQkFZaEJSLE9BQU8sQ0FBQ0gsRUFBUixDQUFhRyxPQUFPLENBQUNNLEdBQVIsQ0FBWUYsUUFBWixFQUFiLENBWmdCLHVCQWNoQixNQUFPSixDQUFBQSxPQUFPLENBQUNNLEdBQWYsQ0FkZ0IsdUJBZWhCLE1BQU9OLENBQUFBLE9BQU8sQ0FBQ1MsR0FBZixDQWZnQix1QkFpQmhCLE1BQU9ULENBQUFBLE9BQVAsQ0FHSCxDQXBCTSxHQUFQLENBcUJILENBeEJELEMsdUJBMEJBVSxNQUFNLENBQUNDLE9BQVAsQ0FBaUJmLGFBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBtb2RlbHM6IHsgUHJvamVjdCB9IH0gPSByZXF1aXJlKCdzZXJudGFzay1kYXRhJylcblxuXG5jb25zdCB1cGRhdGVQcm9qZWN0ID0gKGlkLCBwcm9qZWN0SWQsIG5hbWUpID0+IHtcblxuXG4gICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBwcm9qZWN0ID0gYXdhaXQgUHJvamVjdC5maW5kQnlJZChwcm9qZWN0SWQpXG5cbiAgICAgICAgLy8gZXhpc3RlIHByb3llY3RvXG4gICAgICAgIGlmICghcHJvamVjdCkgdGhyb3cgbmV3IEVycm9yKCdQcm9qZWN0IG5vdCBmb3VuZCcpXG5cbiAgICAgICAgLy8gZWwgdXN1YXJpbyBlcyBlbCBtaXNtbyBxdWUgZWwgYXV0ZW50aWNhZG9cbiAgICAgICAgaWYgKHByb2plY3QuY3JlYXRvci50b1N0cmluZygpICE9PSBpZCkgdGhyb3cgbmV3IEVycm9yKCdOb3QgYXV0aG9yaXplZCcpICAvL09iamVjdElkXG5cbiAgICAgICAgcHJvamVjdCA9IGF3YWl0IFByb2plY3QuZmluZEJ5SWRBbmRVcGRhdGUoeyBfaWQ6IHByb2plY3RJZCB9LCB7IG5hbWUgfSwge25ldzogdHJ1ZX0gKS5sZWFuKClcblxuICAgICAgICAvLyBzYW5pdGl6ZVxuICAgICAgICBwcm9qZWN0LmlkID0gcHJvamVjdC5faWQudG9TdHJpbmcoKVxuXG4gICAgICAgIGRlbGV0ZSBwcm9qZWN0Ll9pZFxuICAgICAgICBkZWxldGUgcHJvamVjdC5fX3ZcblxuICAgICAgICByZXR1cm4gcHJvamVjdFxuXG5cbiAgICB9KSgpXG59XG5cbm1vZHVsZS5leHBvcnRzID0gdXBkYXRlUHJvamVjdCJdfQ==