function cov_245ksekfgg(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/delete-project.spec.js";var hash="a980ab482577a274edc0a7249eaadab9077c20d7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/delete-project.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:2,column:19},end:{line:2,column:34}},"2":{start:{line:3,column:38},end:{line:3,column:45}},"3":{start:{line:4,column:48},end:{line:4,column:72}},"4":{start:{line:6,column:19},end:{line:6,column:23}},"5":{start:{line:7,column:22},end:{line:7,column:49}},"6":{start:{line:10,column:0},end:{line:121,column:2}},"7":{start:{line:11,column:4},end:{line:18,column:6}},"8":{start:{line:12,column:8},end:{line:15,column:10}},"9":{start:{line:17,column:8},end:{line:17,column:55}},"10":{start:{line:20,column:4},end:{line:26,column:6}},"11":{start:{line:21,column:8},end:{line:21,column:33}},"12":{start:{line:22,column:8},end:{line:22,column:44}},"13":{start:{line:23,column:8},end:{line:23,column:41}},"14":{start:{line:25,column:8},end:{line:25,column:47}},"15":{start:{line:28,column:4},end:{line:54,column:6}},"16":{start:{line:31,column:8},end:{line:42,column:10}},"17":{start:{line:33,column:25},end:{line:33,column:69}},"18":{start:{line:34,column:12},end:{line:34,column:24}},"19":{start:{line:37,column:28},end:{line:37,column:72}},"20":{start:{line:38,column:12},end:{line:38,column:32}},"21":{start:{line:40,column:12},end:{line:40,column:32}},"22":{start:{line:41,column:12},end:{line:41,column:34}},"23":{start:{line:44,column:8},end:{line:53,column:10}},"24":{start:{line:45,column:32},end:{line:45,column:66}},"25":{start:{line:47,column:12},end:{line:47,column:47}},"26":{start:{line:49,column:28},end:{line:49,column:61}},"27":{start:{line:51,column:12},end:{line:51,column:38}},"28":{start:{line:56,column:4},end:{line:84,column:6}},"29":{start:{line:59,column:8},end:{line:71,column:10}},"30":{start:{line:60,column:27},end:{line:60,column:71}},"31":{start:{line:61,column:12},end:{line:61,column:20}},"32":{start:{line:63,column:12},end:{line:63,column:35}},"33":{start:{line:65,column:28},end:{line:65,column:72}},"34":{start:{line:66,column:12},end:{line:66,column:33}},"35":{start:{line:68,column:12},end:{line:68,column:34}},"36":{start:{line:70,column:12},end:{line:70,column:32}},"37":{start:{line:73,column:8},end:{line:83,column:10}},"38":{start:{line:74,column:12},end:{line:82,column:13}},"39":{start:{line:75,column:16},end:{line:75,column:51}},"40":{start:{line:76,column:16},end:{line:76,column:49}},"41":{start:{line:79,column:16},end:{line:79,column:56}},"42":{start:{line:80,column:16},end:{line:80,column:38}},"43":{start:{line:81,column:16},end:{line:81,column:67}},"44":{start:{line:86,column:4},end:{line:115,column:6}},"45":{start:{line:89,column:8},end:{line:102,column:10}},"46":{start:{line:91,column:27},end:{line:91,column:71}},"47":{start:{line:92,column:12},end:{line:92,column:20}},"48":{start:{line:95,column:28},end:{line:95,column:71}},"49":{start:{line:96,column:12},end:{line:96,column:33}},"50":{start:{line:97,column:12},end:{line:97,column:34}},"51":{start:{line:99,column:12},end:{line:99,column:32}},"52":{start:{line:101,column:12},end:{line:101,column:38}},"53":{start:{line:104,column:8},end:{line:114,column:10}},"54":{start:{line:105,column:12},end:{line:113,column:13}},"55":{start:{line:106,column:16},end:{line:106,column:51}},"56":{start:{line:107,column:16},end:{line:107,column:52}},"57":{start:{line:110,column:16},end:{line:110,column:56}},"58":{start:{line:111,column:16},end:{line:111,column:41}},"59":{start:{line:112,column:16},end:{line:112,column:70}},"60":{start:{line:117,column:4},end:{line:120,column:6}},"61":{start:{line:118,column:8},end:{line:118,column:55}},"62":{start:{line:119,column:8},end:{line:119,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:32},end:{line:121,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:11},end:{line:11,column:12}},loc:{start:{line:11,column:23},end:{line:18,column:5}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:15},end:{line:20,column:16}},loc:{start:{line:20,column:21},end:{line:26,column:5}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:44},end:{line:28,column:45}},loc:{start:{line:28,column:50},end:{line:54,column:5}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:31,column:19},end:{line:31,column:20}},loc:{start:{line:31,column:31},end:{line:42,column:9}},line:31},"5":{name:"(anonymous_5)",decl:{start:{line:44,column:47},end:{line:44,column:48}},loc:{start:{line:44,column:59},end:{line:53,column:9}},line:44},"6":{name:"(anonymous_6)",decl:{start:{line:56,column:41},end:{line:56,column:42}},loc:{start:{line:56,column:47},end:{line:84,column:5}},line:56},"7":{name:"(anonymous_7)",decl:{start:{line:59,column:19},end:{line:59,column:20}},loc:{start:{line:59,column:31},end:{line:71,column:9}},line:59},"8":{name:"(anonymous_8)",decl:{start:{line:73,column:36},end:{line:73,column:37}},loc:{start:{line:73,column:48},end:{line:83,column:9}},line:73},"9":{name:"(anonymous_9)",decl:{start:{line:86,column:44},end:{line:86,column:45}},loc:{start:{line:86,column:50},end:{line:115,column:5}},line:86},"10":{name:"(anonymous_10)",decl:{start:{line:89,column:19},end:{line:89,column:20}},loc:{start:{line:89,column:31},end:{line:102,column:9}},line:89},"11":{name:"(anonymous_11)",decl:{start:{line:104,column:36},end:{line:104,column:37}},loc:{start:{line:104,column:48},end:{line:114,column:9}},line:104},"12":{name:"(anonymous_12)",decl:{start:{line:117,column:10},end:{line:117,column:11}},loc:{start:{line:117,column:22},end:{line:120,column:5}},line:117}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a980ab482577a274edc0a7249eaadab9077c20d7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_245ksekfgg=function(){return actualCoverage;};}return actualCoverage;}cov_245ksekfgg();cov_245ksekfgg().s[0]++;require('dotenv').config();const{expect}=(cov_245ksekfgg().s[1]++,require('chai'));const{env:{TEST_MONGODB_URL}}=(cov_245ksekfgg().s[2]++,process);const{mongoose,models:{User,Project}}=(cov_245ksekfgg().s[3]++,require('serntask-data'));const{random}=(cov_245ksekfgg().s[4]++,Math);const deleteProject=(cov_245ksekfgg().s[5]++,require('./delete-project'));cov_245ksekfgg().s[6]++;describe('deleteProject',()=>{cov_245ksekfgg().f[0]++;cov_245ksekfgg().s[7]++;before(async()=>{cov_245ksekfgg().f[1]++;cov_245ksekfgg().s[8]++;await mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true});cov_245ksekfgg().s[9]++;await[User.deleteMany(),Project.deleteMany()];});cov_245ksekfgg().s[10]++;beforeEach(()=>{cov_245ksekfgg().f[2]++;cov_245ksekfgg().s[11]++;name=`name-${random()}`;cov_245ksekfgg().s[12]++;email=`email-${random()}@mail.com`;cov_245ksekfgg().s[13]++;password=`password-${random()}`;cov_245ksekfgg().s[14]++;projectName=`projectName-${random()}`;});cov_245ksekfgg().s[15]++;describe('when user and project exist',()=>{cov_245ksekfgg().f[3]++;let id,projectId;cov_245ksekfgg().s[16]++;beforeEach(async()=>{cov_245ksekfgg().f[4]++;// crear user
const user=(cov_245ksekfgg().s[17]++,await User.create({name,email,password}));cov_245ksekfgg().s[18]++;id=user.id;// crear project.
const project=(cov_245ksekfgg().s[19]++,await Project.create({name:projectName}));cov_245ksekfgg().s[20]++;project.creator=id;cov_245ksekfgg().s[21]++;await project.save();cov_245ksekfgg().s[22]++;projectId=project.id;});cov_245ksekfgg().s[23]++;it('should succeed on delete project',async()=>{cov_245ksekfgg().f[5]++;const returnvalue=(cov_245ksekfgg().s[24]++,await deleteProject(id,projectId));cov_245ksekfgg().s[25]++;expect(returnvalue).to.be.undefined;const project=(cov_245ksekfgg().s[26]++,await Project.findById(projectId));cov_245ksekfgg().s[27]++;expect(project).to.be.null;});});cov_245ksekfgg().s[28]++;describe('when user does not exist',()=>{cov_245ksekfgg().f[6]++;let _id,projectId;cov_245ksekfgg().s[29]++;beforeEach(async()=>{cov_245ksekfgg().f[7]++;const{id}=(cov_245ksekfgg().s[30]++,await User.create({name,email,password}));cov_245ksekfgg().s[31]++;_id=id;cov_245ksekfgg().s[32]++;await User.deleteMany();const project=(cov_245ksekfgg().s[33]++,await Project.create({name:projectName}));cov_245ksekfgg().s[34]++;project.creator=_id;cov_245ksekfgg().s[35]++;projectId=project.id;cov_245ksekfgg().s[36]++;await project.save();});cov_245ksekfgg().s[37]++;it('should fail and throw',async()=>{cov_245ksekfgg().f[8]++;cov_245ksekfgg().s[38]++;try{cov_245ksekfgg().s[39]++;await deleteProject(_id,projectId);cov_245ksekfgg().s[40]++;throw new Error('Not authorized');}catch(error){cov_245ksekfgg().s[41]++;expect(error).to.be.an.instanceOf(Error);cov_245ksekfgg().s[42]++;expect(error).to.exist;cov_245ksekfgg().s[43]++;expect(error.message).to.be.equal('Not authorized');}});});cov_245ksekfgg().s[44]++;describe('when project does not exist',()=>{cov_245ksekfgg().f[9]++;let _id,projectId;cov_245ksekfgg().s[45]++;beforeEach(async()=>{cov_245ksekfgg().f[10]++;// creamos user
const{id}=(cov_245ksekfgg().s[46]++,await User.create({name,email,password}));cov_245ksekfgg().s[47]++;_id=id;// creamos project.
const project=(cov_245ksekfgg().s[48]++,await Project.create({name:projectName}));cov_245ksekfgg().s[49]++;project.creator=_id;cov_245ksekfgg().s[50]++;projectId=project.id;cov_245ksekfgg().s[51]++;await project.save();cov_245ksekfgg().s[52]++;await Project.deleteMany();});cov_245ksekfgg().s[53]++;it('should fail and throw',async()=>{cov_245ksekfgg().f[11]++;cov_245ksekfgg().s[54]++;try{cov_245ksekfgg().s[55]++;await deleteProject(_id,projectId);cov_245ksekfgg().s[56]++;throw new Error('Project not found');}catch(error){cov_245ksekfgg().s[57]++;expect(error).to.be.an.instanceOf(Error);cov_245ksekfgg().s[58]++;expect(error).to.be.exist;cov_245ksekfgg().s[59]++;expect(error.message).to.be.equal('Project not found');}});});cov_245ksekfgg().s[60]++;after(async()=>{cov_245ksekfgg().f[12]++;cov_245ksekfgg().s[61]++;await[User.deleteMany(),Project.deleteMany()];cov_245ksekfgg().s[62]++;await mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbGV0ZS1wcm9qZWN0LnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImV4cGVjdCIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiUHJvamVjdCIsInJhbmRvbSIsIk1hdGgiLCJkZWxldGVQcm9qZWN0IiwiZGVzY3JpYmUiLCJiZWZvcmUiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiZGVsZXRlTWFueSIsImJlZm9yZUVhY2giLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInByb2plY3ROYW1lIiwiaWQiLCJwcm9qZWN0SWQiLCJ1c2VyIiwiY3JlYXRlIiwicHJvamVjdCIsImNyZWF0b3IiLCJzYXZlIiwiaXQiLCJyZXR1cm52YWx1ZSIsInRvIiwiYmUiLCJ1bmRlZmluZWQiLCJmaW5kQnlJZCIsIm51bGwiLCJfaWQiLCJFcnJvciIsImVycm9yIiwiYW4iLCJpbnN0YW5jZU9mIiwiZXhpc3QiLCJtZXNzYWdlIiwiZXF1YWwiLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiJtaE5BZVk7bUhBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBQ0EsS0FBTSxDQUFFQyxNQUFGLDJCQUFhRixPQUFPLENBQUMsTUFBRCxDQUFwQixDQUFOLENBQ0EsS0FBTSxDQUFFRyxHQUFHLENBQUUsQ0FBRUMsZ0JBQUYsQ0FBUCwyQkFBZ0NDLE9BQWhDLENBQU4sQ0FDQSxLQUFNLENBQUVDLFFBQUYsQ0FBWUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBUUMsT0FBUixDQUFwQiwyQkFBMENULE9BQU8sQ0FBQyxlQUFELENBQWpELENBQU4sQ0FFQSxLQUFNLENBQUVVLE1BQUYsMkJBQWFDLElBQWIsQ0FBTixDQUNBLEtBQU1DLENBQUFBLGFBQWEsMEJBQUdaLE9BQU8sQ0FBQyxrQkFBRCxDQUFWLENBQW5C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SUgsQ0EvR08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXG5jb25zdCB7IGVudjogeyBURVNUX01PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyLCBQcm9qZWN0IH0gfSA9IHJlcXVpcmUoJ3Nlcm50YXNrLWRhdGEnKVxuXG5jb25zdCB7IHJhbmRvbSB9ID0gTWF0aFxuY29uc3QgZGVsZXRlUHJvamVjdCA9IHJlcXVpcmUoJy4vZGVsZXRlLXByb2plY3QnKVxuXG5cbmRlc2NyaWJlKCdkZWxldGVQcm9qZWN0JywgKCkgPT4ge1xuICAgIGJlZm9yZShhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoVEVTVF9NT05HT0RCX1VSTCwge1xuICAgICAgICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlICAgIFxuICAgICAgICB9KVxuXG4gICAgICAgIGF3YWl0IFtVc2VyLmRlbGV0ZU1hbnkoKSwgUHJvamVjdC5kZWxldGVNYW55KCldXG4gICAgfSlcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXG4gICAgICAgIGVtYWlsID0gYGVtYWlsLSR7cmFuZG9tKCl9QG1haWwuY29tYFxuICAgICAgICBwYXNzd29yZCA9IGBwYXNzd29yZC0ke3JhbmRvbSgpfWBcblxuICAgICAgICBwcm9qZWN0TmFtZSA9IGBwcm9qZWN0TmFtZS0ke3JhbmRvbSgpfWBcbiAgICB9KVxuXG4gICAgZGVzY3JpYmUoJ3doZW4gdXNlciBhbmQgcHJvamVjdCBleGlzdCcsICgpID0+IHtcbiAgICAgICAgbGV0IGlkLCBwcm9qZWN0SWRcblxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIGNyZWFyIHVzZXJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7IG5hbWUsIGVtYWlsLCBwYXNzd29yZCB9KVxuICAgICAgICAgICAgaWQgPSB1c2VyLmlkXG5cbiAgICAgICAgICAgIC8vIGNyZWFyIHByb2plY3QuXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgIFByb2plY3QuY3JlYXRlKHsgbmFtZTogcHJvamVjdE5hbWUgfSlcbiAgICAgICAgICAgIHByb2plY3QuY3JlYXRvciA9IGlkXG5cbiAgICAgICAgICAgIGF3YWl0IHByb2plY3Quc2F2ZSgpXG4gICAgICAgICAgICBwcm9qZWN0SWQgPSBwcm9qZWN0LmlkXG4gICAgICAgIH0pXG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZWVkIG9uIGRlbGV0ZSBwcm9qZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmV0dXJudmFsdWUgPSBhd2FpdCBkZWxldGVQcm9qZWN0KGlkLCBwcm9qZWN0SWQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXR1cm52YWx1ZSkudG8uYmUudW5kZWZpbmVkXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBQcm9qZWN0LmZpbmRCeUlkKHByb2plY3RJZClcblxuICAgICAgICAgICAgZXhwZWN0KHByb2plY3QpLnRvLmJlLm51bGxcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBkZXNjcmliZSgnd2hlbiB1c2VyIGRvZXMgbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICBsZXQgX2lkLCBwcm9qZWN0SWRcblxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IFVzZXIuY3JlYXRlKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0pXG4gICAgICAgICAgICBfaWQgPSBpZFxuXG4gICAgICAgICAgICBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoKVxuXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgUHJvamVjdC5jcmVhdGUoIHsgbmFtZTogcHJvamVjdE5hbWUgfSlcbiAgICAgICAgICAgIHByb2plY3QuY3JlYXRvciA9IF9pZFxuXG4gICAgICAgICAgICBwcm9qZWN0SWQgPSBwcm9qZWN0LmlkXG5cbiAgICAgICAgICAgIGF3YWl0IHByb2plY3Quc2F2ZSgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgaXQoJ3Nob3VsZCBmYWlsIGFuZCB0aHJvdycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGVsZXRlUHJvamVjdChfaWQsIHByb2plY3RJZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhdXRob3JpemVkJylcblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmJlLmFuLmluc3RhbmNlT2YoRXJyb3IpXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5iZS5lcXVhbCgnTm90IGF1dGhvcml6ZWQnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBkZXNjcmliZSgnd2hlbiBwcm9qZWN0IGRvZXMgbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICBsZXQgX2lkLCBwcm9qZWN0SWRcblxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIGNyZWFtb3MgdXNlclxuICAgICAgICAgICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgVXNlci5jcmVhdGUoeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSlcbiAgICAgICAgICAgIF9pZCA9IGlkXG5cbiAgICAgICAgICAgIC8vIGNyZWFtb3MgcHJvamVjdC5cbiAgICAgICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBQcm9qZWN0LmNyZWF0ZSh7IG5hbWU6IHByb2plY3ROYW1lIH0pXG4gICAgICAgICAgICBwcm9qZWN0LmNyZWF0b3IgPSBfaWRcbiAgICAgICAgICAgIHByb2plY3RJZCA9IHByb2plY3QuaWRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXdhaXQgcHJvamVjdC5zYXZlKClcblxuICAgICAgICAgICAgYXdhaXQgUHJvamVjdC5kZWxldGVNYW55KClcbiAgICAgICAgfSlcblxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgYW5kIHRocm93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVQcm9qZWN0KF9pZCwgcHJvamVjdElkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvamVjdCBub3QgZm91bmQnKVxuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uYmUuYW4uaW5zdGFuY2VPZihFcnJvcilcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmJlLmV4aXN0XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmJlLmVxdWFsKCdQcm9qZWN0IG5vdCBmb3VuZCcpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGFmdGVyKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgW1VzZXIuZGVsZXRlTWFueSgpLCBQcm9qZWN0LmRlbGV0ZU1hbnkoKV1cbiAgICAgICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpXG4gICAgfSlcbn0pIl19