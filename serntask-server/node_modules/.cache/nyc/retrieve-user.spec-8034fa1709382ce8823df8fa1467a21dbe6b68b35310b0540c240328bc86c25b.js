function cov_1zv22zb1a5(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/retrieve-user.spec.js";var hash="ed7e77138ae1737cfd734340bc0e6877c31b43c9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/retrieve-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:2,column:19},end:{line:2,column:34}},"2":{start:{line:3,column:38},end:{line:3,column:45}},"3":{start:{line:4,column:39},end:{line:4,column:63}},"4":{start:{line:6,column:19},end:{line:6,column:23}},"5":{start:{line:7,column:21},end:{line:7,column:47}},"6":{start:{line:10,column:0},end:{line:105,column:2}},"7":{start:{line:13,column:4},end:{line:19,column:6}},"8":{start:{line:14,column:8},end:{line:17,column:10}},"9":{start:{line:18,column:8},end:{line:18,column:31}},"10":{start:{line:21,column:4},end:{line:25,column:6}},"11":{start:{line:22,column:8},end:{line:22,column:33}},"12":{start:{line:23,column:8},end:{line:23,column:44}},"13":{start:{line:24,column:8},end:{line:24,column:41}},"14":{start:{line:27,column:4},end:{line:48,column:6}},"15":{start:{line:30,column:8},end:{line:35,column:10}},"16":{start:{line:32,column:27},end:{line:32,column:71}},"17":{start:{line:34,column:12},end:{line:34,column:20}},"18":{start:{line:37,column:8},end:{line:47,column:10}},"19":{start:{line:38,column:25},end:{line:38,column:48}},"20":{start:{line:40,column:12},end:{line:40,column:36}},"21":{start:{line:41,column:12},end:{line:41,column:43}},"22":{start:{line:42,column:12},end:{line:42,column:44}},"23":{start:{line:43,column:12},end:{line:43,column:47}},"24":{start:{line:44,column:12},end:{line:44,column:49}},"25":{start:{line:45,column:12},end:{line:45,column:43}},"26":{start:{line:46,column:12},end:{line:46,column:60}},"27":{start:{line:50,column:4},end:{line:69,column:6}},"28":{start:{line:53,column:8},end:{line:56,column:10}},"29":{start:{line:55,column:12},end:{line:55,column:35}},"30":{start:{line:58,column:8},end:{line:68,column:10}},"31":{start:{line:59,column:12},end:{line:67,column:13}},"32":{start:{line:60,column:29},end:{line:60,column:52}},"33":{start:{line:61,column:16},end:{line:61,column:65}},"34":{start:{line:63,column:16},end:{line:63,column:38}},"35":{start:{line:64,column:16},end:{line:64,column:56}},"36":{start:{line:65,column:16},end:{line:65,column:83}},"37":{start:{line:100,column:4},end:{line:103,column:6}},"38":{start:{line:101,column:8},end:{line:101,column:31}},"39":{start:{line:102,column:8},end:{line:102,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:25},end:{line:10,column:26}},loc:{start:{line:10,column:31},end:{line:105,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:23},end:{line:19,column:5}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:15},end:{line:21,column:16}},loc:{start:{line:21,column:21},end:{line:25,column:5}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:32},end:{line:27,column:33}},loc:{start:{line:27,column:38},end:{line:48,column:5}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:30,column:19},end:{line:30,column:20}},loc:{start:{line:30,column:31},end:{line:35,column:9}},line:30},"5":{name:"(anonymous_5)",decl:{start:{line:37,column:46},end:{line:37,column:47}},loc:{start:{line:37,column:58},end:{line:47,column:9}},line:37},"6":{name:"(anonymous_6)",decl:{start:{line:50,column:39},end:{line:50,column:40}},loc:{start:{line:50,column:45},end:{line:69,column:5}},line:50},"7":{name:"(anonymous_7)",decl:{start:{line:53,column:19},end:{line:53,column:20}},loc:{start:{line:53,column:31},end:{line:56,column:9}},line:53},"8":{name:"(anonymous_8)",decl:{start:{line:58,column:34},end:{line:58,column:35}},loc:{start:{line:58,column:46},end:{line:68,column:9}},line:58},"9":{name:"(anonymous_9)",decl:{start:{line:100,column:10},end:{line:100,column:11}},loc:{start:{line:100,column:22},end:{line:103,column:5}},line:100}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed7e77138ae1737cfd734340bc0e6877c31b43c9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1zv22zb1a5=function(){return actualCoverage;};}return actualCoverage;}cov_1zv22zb1a5();cov_1zv22zb1a5().s[0]++;require('dotenv').config();const{expect}=(cov_1zv22zb1a5().s[1]++,require('chai'));const{env:{TEST_MONGODB_URL}}=(cov_1zv22zb1a5().s[2]++,process);const{mongoose,models:{User}}=(cov_1zv22zb1a5().s[3]++,require('serntask-data'));const{random}=(cov_1zv22zb1a5().s[4]++,Math);const retrieveUser=(cov_1zv22zb1a5().s[5]++,require('./retrieve-user'));cov_1zv22zb1a5().s[6]++;describe('retrieveUser',()=>{cov_1zv22zb1a5().f[0]++;let name,email,password;cov_1zv22zb1a5().s[7]++;before(async()=>{cov_1zv22zb1a5().f[1]++;cov_1zv22zb1a5().s[8]++;await mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true});cov_1zv22zb1a5().s[9]++;await User.deleteMany();});cov_1zv22zb1a5().s[10]++;beforeEach(()=>{cov_1zv22zb1a5().f[2]++;cov_1zv22zb1a5().s[11]++;name=`name-${random()}`;cov_1zv22zb1a5().s[12]++;email=`email-${random()}@mail.com`;cov_1zv22zb1a5().s[13]++;password=`password-${random()}`;});cov_1zv22zb1a5().s[14]++;describe('when user exist',()=>{cov_1zv22zb1a5().f[3]++;let _id;cov_1zv22zb1a5().s[15]++;beforeEach(async()=>{cov_1zv22zb1a5().f[4]++;// creamos al user
const{id}=(cov_1zv22zb1a5().s[16]++,await User.create({name,email,password}));cov_1zv22zb1a5().s[17]++;_id=id;});cov_1zv22zb1a5().s[18]++;it('should succeed on retrieve user',async()=>{cov_1zv22zb1a5().f[5]++;const user=(cov_1zv22zb1a5().s[19]++,await retrieveUser(_id));cov_1zv22zb1a5().s[20]++;expect(user).to.be.exist;cov_1zv22zb1a5().s[21]++;expect(user).to.be.an('object');cov_1zv22zb1a5().s[22]++;expect(user.id).to.be.equal(_id);cov_1zv22zb1a5().s[23]++;expect(user.name).to.be.equal(name);cov_1zv22zb1a5().s[24]++;expect(user.password).to.be.undefined;cov_1zv22zb1a5().s[25]++;expect(user.retrieved).to.exist;cov_1zv22zb1a5().s[26]++;expect(user.retrieved).to.be.an.instanceOf(Date);});});cov_1zv22zb1a5().s[27]++;describe('when user do not exist',()=>{cov_1zv22zb1a5().f[6]++;let _id;cov_1zv22zb1a5().s[28]++;beforeEach(async()=>{cov_1zv22zb1a5().f[7]++;cov_1zv22zb1a5().s[29]++;// eliminamos el user
await User.deleteMany();});cov_1zv22zb1a5().s[30]++;it('should fail a throw',async()=>{cov_1zv22zb1a5().f[8]++;cov_1zv22zb1a5().s[31]++;try{const user=(cov_1zv22zb1a5().s[32]++,await retrieveUser(_id));cov_1zv22zb1a5().s[33]++;throw new Error(`User with id: ${_id} not exist`);}catch(error){cov_1zv22zb1a5().s[34]++;expect(error).to.exist;cov_1zv22zb1a5().s[35]++;expect(error).to.be.an.instanceOf(Error);cov_1zv22zb1a5().s[36]++;expect(error.message).to.be.equal(`User with id: ${_id} not exist`);}});});// la validaciÃ³n asyncrona en caso de contemplarse
// it('should fail on non-string or empty id', () => {
// let id = 1
// expect(() => 
//     retrieveUser(id)
// ).to.throw(Error, `id ${id} is not a string`)
// id = true
// expect(() => 
//     retrieveUser(id)
// ).to.throw(Error, `id ${id} is not a string`)
// id = undefined
// expect(() =>
//     retrieveUser(id)
// ).to.throw(Error, `id ${id} is not a string`)
// id = ''
// expect(() => 
//     retrieveUser(id)
// ).to.throw(Error, `id ${id} is not a string`)
// id = {}
// expect(() => 
//     retrieveUser(id)
// ).to.throw(Error, `id ${id} is not a string`)    
//})
cov_1zv22zb1a5().s[37]++;after(async()=>{cov_1zv22zb1a5().f[9]++;cov_1zv22zb1a5().s[38]++;await User.deleteMany();cov_1zv22zb1a5().s[39]++;await mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuc3BlYy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiZXhwZWN0IiwiZW52IiwiVEVTVF9NT05HT0RCX1VSTCIsInByb2Nlc3MiLCJtb25nb29zZSIsIm1vZGVscyIsIlVzZXIiLCJyYW5kb20iLCJNYXRoIiwicmV0cmlldmVVc2VyIiwiZGVzY3JpYmUiLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImJlZm9yZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJkZWxldGVNYW55IiwiYmVmb3JlRWFjaCIsIl9pZCIsImlkIiwiY3JlYXRlIiwiaXQiLCJ1c2VyIiwidG8iLCJiZSIsImV4aXN0IiwiYW4iLCJlcXVhbCIsInVuZGVmaW5lZCIsInJldHJpZXZlZCIsImluc3RhbmNlT2YiLCJEYXRlIiwiRXJyb3IiLCJlcnJvciIsIm1lc3NhZ2UiLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiJ5bUpBZVk7bUhBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBQ0EsS0FBTSxDQUFFQyxNQUFGLDJCQUFhRixPQUFPLENBQUMsTUFBRCxDQUFwQixDQUFOLENBQ0EsS0FBTSxDQUFFRyxHQUFHLENBQUUsQ0FBRUMsZ0JBQUYsQ0FBUCwyQkFBZ0NDLE9BQWhDLENBQU4sQ0FDQSxLQUFNLENBQUVDLFFBQUYsQ0FBWUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBcEIsMkJBQWlDUixPQUFPLENBQUMsZUFBRCxDQUF4QyxDQUFOLENBRUEsS0FBTSxDQUFFUyxNQUFGLDJCQUFhQyxJQUFiLENBQU4sQ0FDQSxLQUFNQyxDQUFBQSxZQUFZLDBCQUFHWCxPQUFPLENBQUMsaUJBQUQsQ0FBVixDQUFsQixDLHdCQUdBWSxRQUFRLENBQUMsY0FBRCxDQUFpQixJQUFNLHlCQUMzQixHQUFJQyxDQUFBQSxJQUFKLENBQVVDLEtBQVYsQ0FBaUJDLFFBQWpCLENBRDJC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QUFkLENBQWlCRSxLQUFqQixDQURZLHlCQUVaM0IsTUFBTSxDQUFDbUMsS0FBRCxDQUFOLENBQWNWLEVBQWQsQ0FBaUJDLEVBQWpCLENBQW9CRSxFQUFwQixDQUF1QkksVUFBdkIsQ0FBa0NFLEtBQWxDLEVBRlkseUJBR1psQyxNQUFNLENBQUNtQyxLQUFLLENBQUNDLE9BQVAsQ0FBTixDQUFzQlgsRUFBdEIsQ0FBeUJDLEVBQXpCLENBQTRCRyxLQUE1QixDQUFtQyxpQkFBZ0JULEdBQUksWUFBdkQsRUFFSCxDQUNKLENBVkMsQ0FBRixDQVdILENBbkJPLENBQVIsQ0FxQkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhGMkIseUJBMEYzQmlCLEtBQUssQ0FBQyxTQUFZLGtEQUNkLEtBQU0vQixDQUFBQSxJQUFJLENBQUNZLFVBQUwsRUFBTixDQURjLHlCQUVkLEtBQU1kLENBQUFBLFFBQVEsQ0FBQ2tDLFVBQVQsRUFBTixDQUNILENBSEksQ0FBTCxDQUtILENBL0ZPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTCB9IH0gPSBwcm9jZXNzXG5jb25zdCB7IG1vbmdvb3NlLCBtb2RlbHM6IHsgVXNlciB9IH0gPSByZXF1aXJlKCdzZXJudGFzay1kYXRhJylcblxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcbmNvbnN0IHJldHJpZXZlVXNlciA9IHJlcXVpcmUoJy4vcmV0cmlldmUtdXNlcicpXG5cblxuZGVzY3JpYmUoJ3JldHJpZXZlVXNlcicsICgpID0+IHtcbiAgICBsZXQgbmFtZSwgZW1haWwsIHBhc3N3b3JkXG5cbiAgICBiZWZvcmUoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KFRFU1RfTU9OR09EQl9VUkwsIHtcbiAgICAgICAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbiAgICAgICAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoKVxuICAgIH0pXG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgbmFtZSA9IGBuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICBlbWFpbCA9IGBlbWFpbC0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG4gICAgfSlcblxuICAgIGRlc2NyaWJlKCd3aGVuIHVzZXIgZXhpc3QnLCAoKSA9PiB7XG4gICAgICAgIGxldCBfaWRcblxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIGNyZWFtb3MgYWwgdXNlclxuICAgICAgICAgICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgVXNlci5jcmVhdGUoeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSlcblxuICAgICAgICAgICAgX2lkID0gaWRcbiAgICAgICAgfSlcblxuICAgICAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgb24gcmV0cmlldmUgdXNlcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCByZXRyaWV2ZVVzZXIoX2lkKVxuXG4gICAgICAgICAgICBleHBlY3QodXNlcikudG8uYmUuZXhpc3RcbiAgICAgICAgICAgIGV4cGVjdCh1c2VyKS50by5iZS5hbignb2JqZWN0JylcbiAgICAgICAgICAgIGV4cGVjdCh1c2VyLmlkKS50by5iZS5lcXVhbChfaWQpXG4gICAgICAgICAgICBleHBlY3QodXNlci5uYW1lKS50by5iZS5lcXVhbChuYW1lKVxuICAgICAgICAgICAgZXhwZWN0KHVzZXIucGFzc3dvcmQpLnRvLmJlLnVuZGVmaW5lZFxuICAgICAgICAgICAgZXhwZWN0KHVzZXIucmV0cmlldmVkKS50by5leGlzdFxuICAgICAgICAgICAgZXhwZWN0KHVzZXIucmV0cmlldmVkKS50by5iZS5hbi5pbnN0YW5jZU9mKERhdGUpXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGRlc2NyaWJlKCd3aGVuIHVzZXIgZG8gbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICBsZXQgX2lkXG5cbiAgICAgICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBlbGltaW5hbW9zIGVsIHVzZXJcbiAgICAgICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgaXQoJ3Nob3VsZCBmYWlsIGEgdGhyb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCByZXRyaWV2ZVVzZXIoX2lkKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVXNlciB3aXRoIGlkOiAke19pZH0gbm90IGV4aXN0YClcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uYmUuYW4uaW5zdGFuY2VPZihFcnJvcilcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uYmUuZXF1YWwoYFVzZXIgd2l0aCBpZDogJHtfaWR9IG5vdCBleGlzdGApXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gbGEgdmFsaWRhY2nDs24gYXN5bmNyb25hIGVuIGNhc28gZGUgY29udGVtcGxhcnNlXG5cbiAgICAvLyBpdCgnc2hvdWxkIGZhaWwgb24gbm9uLXN0cmluZyBvciBlbXB0eSBpZCcsICgpID0+IHtcbiAgICAvLyBsZXQgaWQgPSAxXG4gICAgLy8gZXhwZWN0KCgpID0+IFxuICAgIC8vICAgICByZXRyaWV2ZVVzZXIoaWQpXG4gICAgLy8gKS50by50aHJvdyhFcnJvciwgYGlkICR7aWR9IGlzIG5vdCBhIHN0cmluZ2ApXG5cbiAgICAvLyBpZCA9IHRydWVcbiAgICAvLyBleHBlY3QoKCkgPT4gXG4gICAgLy8gICAgIHJldHJpZXZlVXNlcihpZClcbiAgICAvLyApLnRvLnRocm93KEVycm9yLCBgaWQgJHtpZH0gaXMgbm90IGEgc3RyaW5nYClcblxuICAgIC8vIGlkID0gdW5kZWZpbmVkXG4gICAgLy8gZXhwZWN0KCgpID0+XG4gICAgLy8gICAgIHJldHJpZXZlVXNlcihpZClcbiAgICAvLyApLnRvLnRocm93KEVycm9yLCBgaWQgJHtpZH0gaXMgbm90IGEgc3RyaW5nYClcblxuICAgIC8vIGlkID0gJydcbiAgICAvLyBleHBlY3QoKCkgPT4gXG4gICAgLy8gICAgIHJldHJpZXZlVXNlcihpZClcbiAgICAvLyApLnRvLnRocm93KEVycm9yLCBgaWQgJHtpZH0gaXMgbm90IGEgc3RyaW5nYClcblxuICAgIC8vIGlkID0ge31cbiAgICAvLyBleHBlY3QoKCkgPT4gXG4gICAgLy8gICAgIHJldHJpZXZlVXNlcihpZClcbiAgICAvLyApLnRvLnRocm93KEVycm9yLCBgaWQgJHtpZH0gaXMgbm90IGEgc3RyaW5nYCkgICAgXG4gICAgLy99KVxuXG4gICAgYWZ0ZXIoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoKVxuICAgICAgICBhd2FpdCBtb25nb29zZS5kaXNjb25uZWN0KClcbiAgICB9KVxuXG59KVxuIl19