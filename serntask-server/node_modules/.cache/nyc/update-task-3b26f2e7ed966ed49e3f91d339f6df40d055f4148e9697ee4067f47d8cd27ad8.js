function cov_1j4sm2ec0x(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/update-task.js";var hash="5593b4993384717a63a20e078f386cee42170ef4";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/update-task.js",statementMap:{"0":{start:{line:1,column:38},end:{line:1,column:62}},"1":{start:{line:4,column:19},end:{line:22,column:1}},"2":{start:{line:6,column:4},end:{line:21,column:8}},"3":{start:{line:7,column:25},end:{line:7,column:56}},"4":{start:{line:9,column:8},end:{line:9,column:79}},"5":{start:{line:9,column:23},end:{line:9,column:79}},"6":{start:{line:10,column:8},end:{line:10,column:81}},"7":{start:{line:10,column:48},end:{line:10,column:81}},"8":{start:{line:12,column:21},end:{line:12,column:105}},"9":{start:{line:14,column:8},end:{line:14,column:37}},"10":{start:{line:16,column:8},end:{line:16,column:23}},"11":{start:{line:17,column:8},end:{line:17,column:23}},"12":{start:{line:20,column:8},end:{line:20,column:19}},"13":{start:{line:24,column:0},end:{line:24,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:58},end:{line:22,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:6,column:12},end:{line:6,column:13}},loc:{start:{line:6,column:24},end:{line:21,column:5}},line:6}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:9,column:79}},type:"if",locations:[{start:{line:9,column:8},end:{line:9,column:79}},{start:{line:9,column:8},end:{line:9,column:79}}],line:9},"1":{loc:{start:{line:10,column:8},end:{line:10,column:81}},type:"if",locations:[{start:{line:10,column:8},end:{line:10,column:81}},{start:{line:10,column:8},end:{line:10,column:81}}],line:10}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5593b4993384717a63a20e078f386cee42170ef4"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1j4sm2ec0x=function(){return actualCoverage;};}return actualCoverage;}cov_1j4sm2ec0x();const{models:{Project,Task}}=(cov_1j4sm2ec0x().s[0]++,require('serntask-data'));cov_1j4sm2ec0x().s[1]++;const updateTask=(id,project,taskId,name,status)=>{cov_1j4sm2ec0x().f[0]++;cov_1j4sm2ec0x().s[2]++;return(async()=>{cov_1j4sm2ec0x().f[1]++;const _project=(cov_1j4sm2ec0x().s[3]++,await Project.findById(project));cov_1j4sm2ec0x().s[4]++;if(!_project){cov_1j4sm2ec0x().b[0][0]++;cov_1j4sm2ec0x().s[5]++;throw new Error(`project with id: ${project} not found`);}else{cov_1j4sm2ec0x().b[0][1]++;}cov_1j4sm2ec0x().s[6]++;if(_project.creator.toString()!==id){cov_1j4sm2ec0x().b[1][0]++;cov_1j4sm2ec0x().s[7]++;throw new Error('Not authorized');}else{cov_1j4sm2ec0x().b[1][1]++;}const task=(cov_1j4sm2ec0x().s[8]++,await Task.findByIdAndUpdate({_id:taskId},{name,status},{new:true}).lean());cov_1j4sm2ec0x().s[9]++;task.id=task._id.toString();cov_1j4sm2ec0x().s[10]++;delete task._id;cov_1j4sm2ec0x().s[11]++;delete task.__v;cov_1j4sm2ec0x().s[12]++;return task;})();};cov_1j4sm2ec0x().s[13]++;module.exports=updateTask;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS10YXNrLmpzIl0sIm5hbWVzIjpbIm1vZGVscyIsIlByb2plY3QiLCJUYXNrIiwicmVxdWlyZSIsInVwZGF0ZVRhc2siLCJpZCIsInByb2plY3QiLCJ0YXNrSWQiLCJuYW1lIiwic3RhdHVzIiwiX3Byb2plY3QiLCJmaW5kQnlJZCIsIkVycm9yIiwiY3JlYXRvciIsInRvU3RyaW5nIiwidGFzayIsImZpbmRCeUlkQW5kVXBkYXRlIiwiX2lkIiwibmV3IiwibGVhbiIsIl9fdiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI0cEVBZVk7MkZBZlosS0FBTSxDQUFFQSxNQUFNLENBQUUsQ0FBRUMsT0FBRixDQUFXQyxJQUFYLENBQVYsMkJBQWdDQyxPQUFPLENBQUMsZUFBRCxDQUF2QyxDQUFOLEMsd0JBR0EsS0FBTUMsQ0FBQUEsVUFBVSxDQUFHLENBQUNDLEVBQUQsQ0FBS0MsT0FBTCxDQUFjQyxNQUFkLENBQXNCQyxJQUF0QixDQUE0QkMsTUFBNUIsR0FBdUMsaURBRXRELE1BQU8sQ0FBQyxTQUFZLHlCQUNoQixLQUFNQyxDQUFBQSxRQUFRLDBCQUFHLEtBQU1ULENBQUFBLE9BQU8sQ0FBQ1UsUUFBUixDQUFpQkwsT0FBakIsQ0FBVCxDQUFkLENBRGdCLHdCQUdoQixHQUFJLENBQUNJLFFBQUwsQ0FBZSx5REFBTSxJQUFJRSxDQUFBQSxLQUFKLENBQVcsb0JBQW1CTixPQUFRLFlBQXRDLENBQU4sQ0FBd0QsQ0FBdkUsaUNBSGdCLHdCQUloQixHQUFJSSxRQUFRLENBQUNHLE9BQVQsQ0FBaUJDLFFBQWpCLEtBQWdDVCxFQUFwQyxDQUF3Qyx5REFBTSxJQUFJTyxDQUFBQSxLQUFKLENBQVUsZ0JBQVYsQ0FBTixDQUFpQyxDQUF6RSxpQ0FFQSxLQUFNRyxDQUFBQSxJQUFJLDBCQUFHLEtBQU1iLENBQUFBLElBQUksQ0FBQ2MsaUJBQUwsQ0FBdUIsQ0FBRUMsR0FBRyxDQUFFVixNQUFQLENBQXZCLENBQXVDLENBQUVDLElBQUYsQ0FBUUMsTUFBUixDQUF2QyxDQUF5RCxDQUFFUyxHQUFHLENBQUUsSUFBUCxDQUF6RCxFQUF3RUMsSUFBeEUsRUFBVCxDQUFWLENBTmdCLHdCQVFoQkosSUFBSSxDQUFDVixFQUFMLENBQVVVLElBQUksQ0FBQ0UsR0FBTCxDQUFTSCxRQUFULEVBQVYsQ0FSZ0IseUJBVWhCLE1BQU9DLENBQUFBLElBQUksQ0FBQ0UsR0FBWixDQVZnQix5QkFXaEIsTUFBT0YsQ0FBQUEsSUFBSSxDQUFDSyxHQUFaLENBWGdCLHlCQWNoQixNQUFPTCxDQUFBQSxJQUFQLENBQ0gsQ0FmTSxHQUFQLENBZ0JILENBbEJELEMseUJBb0JBTSxNQUFNLENBQUNDLE9BQVAsQ0FBaUJsQixVQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgbW9kZWxzOiB7IFByb2plY3QsIFRhc2sgfSB9ID0gcmVxdWlyZSgnc2VybnRhc2stZGF0YScpXG5cblxuY29uc3QgdXBkYXRlVGFzayA9IChpZCwgcHJvamVjdCwgdGFza0lkLCBuYW1lLCBzdGF0dXMpID0+IHtcblxuICAgIHJldHVybiAoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBfcHJvamVjdCA9IGF3YWl0IFByb2plY3QuZmluZEJ5SWQocHJvamVjdClcblxuICAgICAgICBpZiAoIV9wcm9qZWN0KSB0aHJvdyBuZXcgRXJyb3IoYHByb2plY3Qgd2l0aCBpZDogJHtwcm9qZWN0fSBub3QgZm91bmRgKVxuICAgICAgICBpZiAoX3Byb2plY3QuY3JlYXRvci50b1N0cmluZygpICE9PSBpZCkgdGhyb3cgbmV3IEVycm9yKCdOb3QgYXV0aG9yaXplZCcpXG5cbiAgICAgICAgY29uc3QgdGFzayA9IGF3YWl0IFRhc2suZmluZEJ5SWRBbmRVcGRhdGUoeyBfaWQ6IHRhc2tJZH0sIHsgbmFtZSwgc3RhdHVzIH0sIHsgbmV3OiB0cnVlIH0pLmxlYW4oKVxuXG4gICAgICAgIHRhc2suaWQgPSB0YXNrLl9pZC50b1N0cmluZygpXG5cbiAgICAgICAgZGVsZXRlIHRhc2suX2lkXG4gICAgICAgIGRlbGV0ZSB0YXNrLl9fdlxuXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFza1xuICAgIH0pKClcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB1cGRhdGVUYXNrIl19