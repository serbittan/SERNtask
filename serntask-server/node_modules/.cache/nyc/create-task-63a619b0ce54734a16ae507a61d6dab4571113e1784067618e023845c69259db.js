function cov_x3583bixs(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/create-task.js";var hash="eab919705e388e116f4292baa6c8e062d21c6839";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/create-task.js",statementMap:{"0":{start:{line:1,column:38},end:{line:1,column:62}},"1":{start:{line:4,column:19},end:{line:20,column:1}},"2":{start:{line:6,column:4},end:{line:19,column:8}},"3":{start:{line:7,column:25},end:{line:7,column:56}},"4":{start:{line:9,column:8},end:{line:9,column:78}},"5":{start:{line:9,column:23},end:{line:9,column:78}},"6":{start:{line:10,column:8},end:{line:10,column:81}},"7":{start:{line:10,column:48},end:{line:10,column:81}},"8":{start:{line:12,column:21},end:{line:12,column:55}},"9":{start:{line:14,column:8},end:{line:14,column:26}},"10":{start:{line:16,column:8},end:{line:16,column:25}},"11":{start:{line:22,column:0},end:{line:22,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:42},end:{line:20,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:6,column:12},end:{line:6,column:13}},loc:{start:{line:6,column:24},end:{line:19,column:5}},line:6}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:9,column:78}},type:"if",locations:[{start:{line:9,column:8},end:{line:9,column:78}},{start:{line:9,column:8},end:{line:9,column:78}}],line:9},"1":{loc:{start:{line:10,column:8},end:{line:10,column:81}},type:"if",locations:[{start:{line:10,column:8},end:{line:10,column:81}},{start:{line:10,column:8},end:{line:10,column:81}}],line:10}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"eab919705e388e116f4292baa6c8e062d21c6839"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_x3583bixs=function(){return actualCoverage;};}return actualCoverage;}cov_x3583bixs();const{models:{Project,Task}}=(cov_x3583bixs().s[0]++,require('serntask-data'));cov_x3583bixs().s[1]++;const createTask=(id,name,project)=>{cov_x3583bixs().f[0]++;cov_x3583bixs().s[2]++;return(async()=>{cov_x3583bixs().f[1]++;const _project=(cov_x3583bixs().s[3]++,await Project.findById(project));cov_x3583bixs().s[4]++;if(!_project){cov_x3583bixs().b[0][0]++;cov_x3583bixs().s[5]++;throw new Error(`Project with id ${project} not found`);}else{cov_x3583bixs().b[0][1]++;}cov_x3583bixs().s[6]++;if(_project.creator.toString()!==id){cov_x3583bixs().b[1][0]++;cov_x3583bixs().s[7]++;throw new Error('Not authorized');}else{cov_x3583bixs().b[1][1]++;}const task=(cov_x3583bixs().s[8]++,await new Task({name,project}));cov_x3583bixs().s[9]++;task.date=Date();cov_x3583bixs().s[10]++;await task.save();})();};cov_x3583bixs().s[11]++;module.exports=createTask;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS10YXNrLmpzIl0sIm5hbWVzIjpbIm1vZGVscyIsIlByb2plY3QiLCJUYXNrIiwicmVxdWlyZSIsImNyZWF0ZVRhc2siLCJpZCIsIm5hbWUiLCJwcm9qZWN0IiwiX3Byb2plY3QiLCJmaW5kQnlJZCIsIkVycm9yIiwiY3JlYXRvciIsInRvU3RyaW5nIiwidGFzayIsImRhdGUiLCJEYXRlIiwic2F2ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI0aEVBZVk7eUZBZlosS0FBTSxDQUFFQSxNQUFNLENBQUUsQ0FBRUMsT0FBRixDQUFXQyxJQUFYLENBQVYsMEJBQWdDQyxPQUFPLENBQUMsZUFBRCxDQUF2QyxDQUFOLEMsdUJBR0EsS0FBTUMsQ0FBQUEsVUFBVSxDQUFHLENBQUNDLEVBQUQsQ0FBS0MsSUFBTCxDQUFXQyxPQUFYLEdBQXVCLCtDQUV0QyxNQUFPLENBQUMsU0FBWSx3QkFDaEIsS0FBTUMsQ0FBQUEsUUFBUSx5QkFBRyxLQUFNUCxDQUFBQSxPQUFPLENBQUNRLFFBQVIsQ0FBaUJGLE9BQWpCLENBQVQsQ0FBZCxDQURnQix1QkFHaEIsR0FBSSxDQUFDQyxRQUFMLENBQWUsdURBQU0sSUFBSUUsQ0FBQUEsS0FBSixDQUFXLG1CQUFrQkgsT0FBUSxZQUFyQyxDQUFOLENBQXVELENBQXRFLGdDQUhnQix1QkFJaEIsR0FBSUMsUUFBUSxDQUFDRyxPQUFULENBQWlCQyxRQUFqQixLQUFnQ1AsRUFBcEMsQ0FBd0MsdURBQU0sSUFBSUssQ0FBQUEsS0FBSixDQUFVLGdCQUFWLENBQU4sQ0FBaUMsQ0FBekUsZ0NBRUEsS0FBTUcsQ0FBQUEsSUFBSSx5QkFBRyxLQUFPLElBQUlYLENBQUFBLElBQUosQ0FBUyxDQUFFSSxJQUFGLENBQVFDLE9BQVIsQ0FBVCxDQUFWLENBQVYsQ0FOZ0IsdUJBUWhCTSxJQUFJLENBQUNDLElBQUwsQ0FBWUMsSUFBSSxFQUFoQixDQVJnQix3QkFVaEIsS0FBTUYsQ0FBQUEsSUFBSSxDQUFDRyxJQUFMLEVBQU4sQ0FHSCxDQWJNLEdBQVAsQ0FjSCxDQWhCRCxDLHdCQWtCQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCZCxVQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgbW9kZWxzOiB7IFByb2plY3QsIFRhc2sgfSB9ID0gcmVxdWlyZSgnc2VybnRhc2stZGF0YScpXG5cblxuY29uc3QgY3JlYXRlVGFzayA9IChpZCwgbmFtZSwgcHJvamVjdCkgPT4ge1xuXG4gICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IF9wcm9qZWN0ID0gYXdhaXQgUHJvamVjdC5maW5kQnlJZChwcm9qZWN0KVxuXG4gICAgICAgIGlmICghX3Byb2plY3QpIHRocm93IG5ldyBFcnJvcihgUHJvamVjdCB3aXRoIGlkICR7cHJvamVjdH0gbm90IGZvdW5kYClcbiAgICAgICAgaWYgKF9wcm9qZWN0LmNyZWF0b3IudG9TdHJpbmcoKSAhPT0gaWQpIHRocm93IG5ldyBFcnJvcignTm90IGF1dGhvcml6ZWQnKVxuXG4gICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCAgbmV3IFRhc2soeyBuYW1lLCBwcm9qZWN0IH0pXG5cbiAgICAgICAgdGFzay5kYXRlID0gRGF0ZSgpXG5cbiAgICAgICAgYXdhaXQgdGFzay5zYXZlKClcblxuXG4gICAgfSkoKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVRhc2siXX0=