function cov_1cqbzjxh8l(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/register-user.js";var hash="d40b9888fea08c11d50f9d4efafd66ab8199adcc";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/register-user.js",statementMap:{"0":{start:{line:1,column:29},end:{line:1,column:53}},"1":{start:{line:2,column:15},end:{line:2,column:32}},"2":{start:{line:4,column:21},end:{line:20,column:1}},"3":{start:{line:7,column:4},end:{line:18,column:8}},"4":{start:{line:8,column:19},end:{line:8,column:48}},"5":{start:{line:10,column:8},end:{line:10,column:55}},"6":{start:{line:10,column:18},end:{line:10,column:55}},"7":{start:{line:12,column:30},end:{line:12,column:61}},"8":{start:{line:14,column:8},end:{line:14,column:72}},"9":{start:{line:16,column:8},end:{line:16,column:25}},"10":{start:{line:21,column:0},end:{line:21,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:48},end:{line:20,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:7,column:12},end:{line:7,column:13}},loc:{start:{line:7,column:24},end:{line:18,column:5}},line:7}},branchMap:{"0":{loc:{start:{line:10,column:8},end:{line:10,column:55}},type:"if",locations:[{start:{line:10,column:8},end:{line:10,column:55}},{start:{line:10,column:8},end:{line:10,column:55}}],line:10}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d40b9888fea08c11d50f9d4efafd66ab8199adcc"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1cqbzjxh8l=function(){return actualCoverage;};}return actualCoverage;}cov_1cqbzjxh8l();const{models:{User}}=(cov_1cqbzjxh8l().s[0]++,require('serntask-data'));const bcrypt=(cov_1cqbzjxh8l().s[1]++,require('bcrypt'));cov_1cqbzjxh8l().s[2]++;const registerUser=(name,email,password)=>{cov_1cqbzjxh8l().f[0]++;cov_1cqbzjxh8l().s[3]++;// validate
return(async()=>{cov_1cqbzjxh8l().f[1]++;let user=(cov_1cqbzjxh8l().s[4]++,await User.findOne({email}));cov_1cqbzjxh8l().s[5]++;if(user){cov_1cqbzjxh8l().b[0][0]++;cov_1cqbzjxh8l().s[6]++;throw new Error('user already exist');}else{cov_1cqbzjxh8l().b[0][1]++;}const validPassword=(cov_1cqbzjxh8l().s[7]++,await bcrypt.hash(password,10));cov_1cqbzjxh8l().s[8]++;user=await new User({name,email,password:validPassword});cov_1cqbzjxh8l().s[9]++;await user.save();})();};cov_1cqbzjxh8l().s[10]++;module.exports=registerUser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLXVzZXIuanMiXSwibmFtZXMiOlsibW9kZWxzIiwiVXNlciIsInJlcXVpcmUiLCJiY3J5cHQiLCJyZWdpc3RlclVzZXIiLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInVzZXIiLCJmaW5kT25lIiwiRXJyb3IiLCJ2YWxpZFBhc3N3b3JkIiwiaGFzaCIsInNhdmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiZ3lEQWVZOzJGQWZaLEtBQU0sQ0FBRUEsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBViwyQkFBdUJDLE9BQU8sQ0FBQyxlQUFELENBQTlCLENBQU4sQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFWLENBQVosQyx3QkFFQSxLQUFNRSxDQUFBQSxZQUFZLENBQUcsQ0FBQ0MsSUFBRCxDQUFPQyxLQUFQLENBQWNDLFFBQWQsR0FBMkIsaURBQzVDO0FBRUEsTUFBTyxDQUFDLFNBQVkseUJBQ2hCLEdBQUlDLENBQUFBLElBQUksMEJBQUcsS0FBTVAsQ0FBQUEsSUFBSSxDQUFDUSxPQUFMLENBQWEsQ0FBRUgsS0FBRixDQUFiLENBQVQsQ0FBUixDQURnQix3QkFHaEIsR0FBSUUsSUFBSixDQUFVLHlEQUFNLElBQUlFLENBQUFBLEtBQUosQ0FBVSxvQkFBVixDQUFOLENBQXFDLENBQS9DLGlDQUVBLEtBQU1DLENBQUFBLGFBQWEsMEJBQUcsS0FBTVIsQ0FBQUEsTUFBTSxDQUFDUyxJQUFQLENBQVlMLFFBQVosQ0FBc0IsRUFBdEIsQ0FBVCxDQUFuQixDQUxnQix3QkFPaEJDLElBQUksQ0FBRyxLQUFNLElBQUlQLENBQUFBLElBQUosQ0FBUyxDQUFFSSxJQUFGLENBQVFDLEtBQVIsQ0FBZUMsUUFBUSxDQUFHSSxhQUExQixDQUFULENBQWIsQ0FQZ0Isd0JBU2hCLEtBQU1ILENBQUFBLElBQUksQ0FBQ0ssSUFBTCxFQUFOLENBRUgsQ0FYTSxHQUFQLENBYUgsQ0FoQkQsQyx5QkFpQkFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQlgsWUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ3Nlcm50YXNrLWRhdGEnKVxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0JylcblxuY29uc3QgcmVnaXN0ZXJVc2VyID0gKG5hbWUsIGVtYWlsLCBwYXNzd29yZCkgPT4ge1xuICAgIC8vIHZhbGlkYXRlXG5cbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KVxuXG4gICAgICAgIGlmICh1c2VyKSB0aHJvdyBuZXcgRXJyb3IoJ3VzZXIgYWxyZWFkeSBleGlzdCcpXG5cbiAgICAgICAgY29uc3QgdmFsaWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcblxuICAgICAgICB1c2VyID0gYXdhaXQgbmV3IFVzZXIoeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQgOiB2YWxpZFBhc3N3b3JkIH0pXG5cbiAgICAgICAgYXdhaXQgdXNlci5zYXZlKClcblxuICAgIH0pKClcblxufVxubW9kdWxlLmV4cG9ydHMgPSByZWdpc3RlclVzZXIiXX0=