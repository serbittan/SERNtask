function cov_2rczbqcuif(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/retrieve-projects.spec.js";var hash="30ab812459acf19fdedb3dbdf2e1acdb05f14d31";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/retrieve-projects.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:2,column:19},end:{line:2,column:34}},"2":{start:{line:3,column:38},end:{line:3,column:45}},"3":{start:{line:4,column:48},end:{line:4,column:72}},"4":{start:{line:6,column:19},end:{line:6,column:23}},"5":{start:{line:7,column:25},end:{line:7,column:55}},"6":{start:{line:10,column:0},end:{line:132,column:2}},"7":{start:{line:13,column:4},end:{line:20,column:6}},"8":{start:{line:14,column:8},end:{line:17,column:10}},"9":{start:{line:19,column:8},end:{line:19,column:55}},"10":{start:{line:22,column:4},end:{line:28,column:6}},"11":{start:{line:23,column:8},end:{line:23,column:33}},"12":{start:{line:24,column:8},end:{line:24,column:44}},"13":{start:{line:25,column:8},end:{line:25,column:41}},"14":{start:{line:27,column:8},end:{line:27,column:47}},"15":{start:{line:30,column:4},end:{line:60,column:6}},"16":{start:{line:33,column:8},end:{line:46,column:10}},"17":{start:{line:35,column:25},end:{line:35,column:69}},"18":{start:{line:37,column:12},end:{line:37,column:24}},"19":{start:{line:39,column:28},end:{line:39,column:71}},"20":{start:{line:40,column:12},end:{line:40,column:34}},"21":{start:{line:42,column:12},end:{line:42,column:32}},"22":{start:{line:45,column:12},end:{line:45,column:32}},"23":{start:{line:48,column:8},end:{line:58,column:10}},"24":{start:{line:49,column:29},end:{line:49,column:55}},"25":{start:{line:51,column:12},end:{line:51,column:46}},"26":{start:{line:52,column:12},end:{line:52,column:40}},"27":{start:{line:53,column:12},end:{line:53,column:38}},"28":{start:{line:54,column:12},end:{line:54,column:66}},"29":{start:{line:55,column:12},end:{line:55,column:61}},"30":{start:{line:56,column:12},end:{line:56,column:65}},"31":{start:{line:57,column:12},end:{line:57,column:57}},"32":{start:{line:62,column:4},end:{line:93,column:6}},"33":{start:{line:65,column:8},end:{line:81,column:10}},"34":{start:{line:67,column:27},end:{line:67,column:71}},"35":{start:{line:68,column:12},end:{line:68,column:20}},"36":{start:{line:71,column:28},end:{line:71,column:71}},"37":{start:{line:72,column:12},end:{line:72,column:34}},"38":{start:{line:74,column:12},end:{line:74,column:33}},"39":{start:{line:76,column:12},end:{line:76,column:32}},"40":{start:{line:79,column:12},end:{line:79,column:35}},"41":{start:{line:83,column:8},end:{line:92,column:10}},"42":{start:{line:84,column:12},end:{line:91,column:13}},"43":{start:{line:85,column:33},end:{line:85,column:71}},"44":{start:{line:86,column:16},end:{line:86,column:46}},"45":{start:{line:88,column:16},end:{line:88,column:41}},"46":{start:{line:89,column:16},end:{line:89,column:56}},"47":{start:{line:90,column:16},end:{line:90,column:64}},"48":{start:{line:95,column:4},end:{line:126,column:6}},"49":{start:{line:98,column:8},end:{line:114,column:10}},"50":{start:{line:100,column:27},end:{line:100,column:71}},"51":{start:{line:101,column:12},end:{line:101,column:20}},"52":{start:{line:104,column:28},end:{line:104,column:71}},"53":{start:{line:105,column:12},end:{line:105,column:34}},"54":{start:{line:107,column:12},end:{line:107,column:33}},"55":{start:{line:109,column:12},end:{line:109,column:32}},"56":{start:{line:112,column:12},end:{line:112,column:38}},"57":{start:{line:116,column:8},end:{line:125,column:10}},"58":{start:{line:117,column:12},end:{line:124,column:13}},"59":{start:{line:118,column:33},end:{line:118,column:71}},"60":{start:{line:119,column:16},end:{line:119,column:46}},"61":{start:{line:121,column:16},end:{line:121,column:41}},"62":{start:{line:122,column:16},end:{line:122,column:56}},"63":{start:{line:123,column:16},end:{line:123,column:64}},"64":{start:{line:128,column:4},end:{line:131,column:6}},"65":{start:{line:129,column:8},end:{line:129,column:55}},"66":{start:{line:130,column:8},end:{line:130,column:35}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:29},end:{line:10,column:30}},loc:{start:{line:10,column:35},end:{line:132,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:23},end:{line:20,column:5}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:15},end:{line:22,column:16}},loc:{start:{line:22,column:21},end:{line:28,column:5}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:50},end:{line:30,column:51}},loc:{start:{line:30,column:56},end:{line:60,column:5}},line:30},"4":{name:"(anonymous_4)",decl:{start:{line:33,column:19},end:{line:33,column:20}},loc:{start:{line:33,column:31},end:{line:46,column:9}},line:33},"5":{name:"(anonymous_5)",decl:{start:{line:48,column:50},end:{line:48,column:51}},loc:{start:{line:48,column:62},end:{line:58,column:9}},line:48},"6":{name:"(anonymous_6)",decl:{start:{line:62,column:41},end:{line:62,column:42}},loc:{start:{line:62,column:47},end:{line:93,column:5}},line:62},"7":{name:"(anonymous_7)",decl:{start:{line:65,column:19},end:{line:65,column:20}},loc:{start:{line:65,column:31},end:{line:81,column:9}},line:65},"8":{name:"(anonymous_8)",decl:{start:{line:83,column:39},end:{line:83,column:40}},loc:{start:{line:83,column:51},end:{line:92,column:9}},line:83},"9":{name:"(anonymous_9)",decl:{start:{line:95,column:44},end:{line:95,column:45}},loc:{start:{line:95,column:50},end:{line:126,column:5}},line:95},"10":{name:"(anonymous_10)",decl:{start:{line:98,column:19},end:{line:98,column:20}},loc:{start:{line:98,column:31},end:{line:114,column:9}},line:98},"11":{name:"(anonymous_11)",decl:{start:{line:116,column:39},end:{line:116,column:40}},loc:{start:{line:116,column:51},end:{line:125,column:9}},line:116},"12":{name:"(anonymous_12)",decl:{start:{line:128,column:10},end:{line:128,column:11}},loc:{start:{line:128,column:22},end:{line:131,column:5}},line:128}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30ab812459acf19fdedb3dbdf2e1acdb05f14d31"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2rczbqcuif=function(){return actualCoverage;};}return actualCoverage;}cov_2rczbqcuif();cov_2rczbqcuif().s[0]++;require('dotenv').config();const{expect}=(cov_2rczbqcuif().s[1]++,require('chai'));const{env:{TEST_MONGODB_URL}}=(cov_2rczbqcuif().s[2]++,process);const{mongoose,models:{User,Project}}=(cov_2rczbqcuif().s[3]++,require('serntask-data'));const{random}=(cov_2rczbqcuif().s[4]++,Math);const retrieveProjects=(cov_2rczbqcuif().s[5]++,require('./retrieve-projects'));cov_2rczbqcuif().s[6]++;describe('retrieveProjects',()=>{cov_2rczbqcuif().f[0]++;let name,email,password,projectName;cov_2rczbqcuif().s[7]++;before(async()=>{cov_2rczbqcuif().f[1]++;cov_2rczbqcuif().s[8]++;await mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true});cov_2rczbqcuif().s[9]++;await[User.deleteMany(),Project.deleteMany()];});cov_2rczbqcuif().s[10]++;beforeEach(()=>{cov_2rczbqcuif().f[2]++;cov_2rczbqcuif().s[11]++;name=`name-${random()}`;cov_2rczbqcuif().s[12]++;email=`email-${random()}@mail.com`;cov_2rczbqcuif().s[13]++;password=`password-${random()}`;cov_2rczbqcuif().s[14]++;projectName=`projectName-${random()}`;});cov_2rczbqcuif().s[15]++;describe('when user exist and project exist',()=>{cov_2rczbqcuif().f[3]++;let id,projectId;cov_2rczbqcuif().s[16]++;beforeEach(async()=>{cov_2rczbqcuif().f[4]++;// creamos al user
const user=(cov_2rczbqcuif().s[17]++,await User.create({name,email,password}));cov_2rczbqcuif().s[18]++;id=user.id;// creamos un project
const project=(cov_2rczbqcuif().s[19]++,await Project.create({name:projectName}));cov_2rczbqcuif().s[20]++;projectId=project.id;cov_2rczbqcuif().s[21]++;project.creator=id;cov_2rczbqcuif().s[22]++;await project.save();});cov_2rczbqcuif().s[23]++;it('should succeed on retrieve projects',async()=>{cov_2rczbqcuif().f[5]++;const projects=(cov_2rczbqcuif().s[24]++,await retrieveProjects(id));cov_2rczbqcuif().s[25]++;expect(projects).to.be.an('array');cov_2rczbqcuif().s[26]++;expect(projects).to.be.exist;cov_2rczbqcuif().s[27]++;expect(projectId).to.exist;cov_2rczbqcuif().s[28]++;expect(projects[0].creator.toString()).to.be.equal(id);cov_2rczbqcuif().s[29]++;expect(projects[0].name).to.be.equal(projectName);cov_2rczbqcuif().s[30]++;expect(projects[0].created).to.be.an.instanceOf(Date);cov_2rczbqcuif().s[31]++;expect(projects[0].id).to.be.equal(projectId);});});cov_2rczbqcuif().s[32]++;describe('when user does not exist',()=>{cov_2rczbqcuif().f[6]++;let _id,projectId;cov_2rczbqcuif().s[33]++;beforeEach(async()=>{cov_2rczbqcuif().f[7]++;// creamos user.
const{id}=(cov_2rczbqcuif().s[34]++,await User.create({name,email,password}));cov_2rczbqcuif().s[35]++;_id=id;// creamos project.
const project=(cov_2rczbqcuif().s[36]++,await Project.create({name:projectName}));cov_2rczbqcuif().s[37]++;projectId=project.id;cov_2rczbqcuif().s[38]++;project.creator=_id;cov_2rczbqcuif().s[39]++;await project.save();// eliminamos el user.
cov_2rczbqcuif().s[40]++;await User.deleteMany();});cov_2rczbqcuif().s[41]++;it('should be fail and throw',async()=>{cov_2rczbqcuif().f[8]++;cov_2rczbqcuif().s[42]++;try{const projects=(cov_2rczbqcuif().s[43]++,await retrieveProjects(_id,projectId));cov_2rczbqcuif().s[44]++;throw new Error('no projects');}catch(error){cov_2rczbqcuif().s[45]++;expect(error).to.be.exist;cov_2rczbqcuif().s[46]++;expect(error).to.be.an.instanceOf(Error);cov_2rczbqcuif().s[47]++;expect(error.message).to.be.equal('no projects');}});});cov_2rczbqcuif().s[48]++;describe('when project does not exist',()=>{cov_2rczbqcuif().f[9]++;let _id,projectId;cov_2rczbqcuif().s[49]++;beforeEach(async()=>{cov_2rczbqcuif().f[10]++;// creamos user.
const{id}=(cov_2rczbqcuif().s[50]++,await User.create({name,email,password}));cov_2rczbqcuif().s[51]++;_id=id;// creamos project.
const project=(cov_2rczbqcuif().s[52]++,await Project.create({name:projectName}));cov_2rczbqcuif().s[53]++;projectId=project.id;cov_2rczbqcuif().s[54]++;project.creator=_id;cov_2rczbqcuif().s[55]++;await project.save();// eliminamos el project.
cov_2rczbqcuif().s[56]++;await Project.deleteMany();});cov_2rczbqcuif().s[57]++;it('should be fail and throw',async()=>{cov_2rczbqcuif().f[11]++;cov_2rczbqcuif().s[58]++;try{const projects=(cov_2rczbqcuif().s[59]++,await retrieveProjects(_id,projectId));cov_2rczbqcuif().s[60]++;throw new Error('no projects');}catch(error){cov_2rczbqcuif().s[61]++;expect(error).to.be.exist;cov_2rczbqcuif().s[62]++;expect(error).to.be.an.instanceOf(Error);cov_2rczbqcuif().s[63]++;expect(error.message).to.be.equal('no projects');}});});cov_2rczbqcuif().s[64]++;after(async()=>{cov_2rczbqcuif().f[12]++;cov_2rczbqcuif().s[65]++;await[User.deleteMany(),Project.deleteMany()];cov_2rczbqcuif().s[66]++;await mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXByb2plY3RzLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImV4cGVjdCIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiUHJvamVjdCIsInJhbmRvbSIsIk1hdGgiLCJyZXRyaWV2ZVByb2plY3RzIiwiZGVzY3JpYmUiLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInByb2plY3ROYW1lIiwiYmVmb3JlIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImRlbGV0ZU1hbnkiLCJiZWZvcmVFYWNoIiwiaWQiLCJwcm9qZWN0SWQiLCJ1c2VyIiwiY3JlYXRlIiwicHJvamVjdCIsImNyZWF0b3IiLCJzYXZlIiwiaXQiLCJwcm9qZWN0cyIsInRvIiwiYmUiLCJhbiIsImV4aXN0IiwidG9TdHJpbmciLCJlcXVhbCIsImNyZWF0ZWQiLCJpbnN0YW5jZU9mIiwiRGF0ZSIsIl9pZCIsIkVycm9yIiwiZXJyb3IiLCJtZXNzYWdlIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoicXlOQWVZO21IQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUNBLEtBQU0sQ0FBRUMsTUFBRiwyQkFBYUYsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUcsR0FBRyxDQUFFLENBQUVDLGdCQUFGLENBQVAsMkJBQWdDQyxPQUFoQyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxRQUFGLENBQVlDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVFDLE9BQVIsQ0FBcEIsMkJBQTBDVCxPQUFPLENBQUMsZUFBRCxDQUFqRCxDQUFOLENBRUEsS0FBTSxDQUFFVSxNQUFGLDJCQUFhQyxJQUFiLENBQU4sQ0FDQSxLQUFNQyxDQUFBQSxnQkFBZ0IsMEJBQUdaLE9BQU8sQ0FBQyxxQkFBRCxDQUFWLENB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QTZCLFNBQVksbURBQ3ZDLEdBQUksQ0FDQSxLQUFNQyxDQUFBQSxRQUFRLDJCQUFHLEtBQU1wQixDQUFBQSxnQkFBZ0IsQ0FBQzhCLEdBQUQsQ0FBTWpCLFNBQU4sQ0FBekIsQ0FBZCxDQURBLHlCQUVBLEtBQU0sSUFBSWtCLENBQUFBLEtBQUosQ0FBVSxhQUFWLENBQU4sQ0FDSCxDQUFDLE1BQU9DLEtBQVAsQ0FBYywwQkFDWjFDLE1BQU0sQ0FBQzBDLEtBQUQsQ0FBTixDQUFjWCxFQUFkLENBQWlCQyxFQUFqQixDQUFvQkUsS0FBcEIsQ0FEWSx5QkFFWmxDLE1BQU0sQ0FBQzBDLEtBQUQsQ0FBTixDQUFjWCxFQUFkLENBQWlCQyxFQUFqQixDQUFvQkMsRUFBcEIsQ0FBdUJLLFVBQXZCLENBQWtDRyxLQUFsQyxFQUZZLHlCQUdaekMsTUFBTSxDQUFDMEMsS0FBSyxDQUFDQyxPQUFQLENBQU4sQ0FBc0JaLEVBQXRCLENBQXlCQyxFQUF6QixDQUE0QkksS0FBNUIsQ0FBa0MsYUFBbEMsRUFDSCxDQUNKLENBVEMsQ0FBRixDQVVILENBL0JPLENBQVIsQ0FyRitCLHlCQXNIL0JRLEtBQUssQ0FBQyxTQUFZLG1EQUNkLEtBQU0sQ0FBQ3RDLElBQUksQ0FBQ2MsVUFBTCxFQUFELENBQW9CYixPQUFPLENBQUNhLFVBQVIsRUFBcEIsQ0FBTixDQURjLHlCQUVkLEtBQU1oQixDQUFBQSxRQUFRLENBQUN5QyxVQUFULEVBQU4sQ0FDSCxDQUhJLENBQUwsQ0FJSCxDQTFITyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkwgfSB9ID0gcHJvY2Vzc1xuY29uc3QgeyBtb25nb29zZSwgbW9kZWxzOiB7IFVzZXIsIFByb2plY3QgfSB9ID0gcmVxdWlyZSgnc2VybnRhc2stZGF0YScpXG5cbmNvbnN0IHsgcmFuZG9tIH0gPSBNYXRoXG5jb25zdCByZXRyaWV2ZVByb2plY3RzID0gcmVxdWlyZSgnLi9yZXRyaWV2ZS1wcm9qZWN0cycpXG5cblxuZGVzY3JpYmUoJ3JldHJpZXZlUHJvamVjdHMnLCAoKSA9PiB7XG4gICAgbGV0IG5hbWUsIGVtYWlsLCBwYXNzd29yZCwgcHJvamVjdE5hbWVcblxuICAgIGJlZm9yZShhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoVEVTVF9NT05HT0RCX1VSTCwge1xuICAgICAgICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlXG4gICAgICAgIH0pXG5cbiAgICAgICAgYXdhaXQgW1VzZXIuZGVsZXRlTWFueSgpLCBQcm9qZWN0LmRlbGV0ZU1hbnkoKV1cbiAgICB9KVxuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIG5hbWUgPSBgbmFtZS0ke3JhbmRvbSgpfWBcbiAgICAgICAgZW1haWwgPSBgZW1haWwtJHtyYW5kb20oKX1AbWFpbC5jb21gXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxuXG4gICAgICAgIHByb2plY3ROYW1lID0gYHByb2plY3ROYW1lLSR7cmFuZG9tKCl9YFxuICAgIH0pXG5cbiAgICBkZXNjcmliZSgnd2hlbiB1c2VyIGV4aXN0IGFuZCBwcm9qZWN0IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICBsZXQgaWQsIHByb2plY3RJZFxuXG4gICAgICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gY3JlYW1vcyBhbCB1c2VyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5jcmVhdGUoeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSlcblxuICAgICAgICAgICAgaWQgPSB1c2VyLmlkXG4gICAgICAgICAgICAvLyBjcmVhbW9zIHVuIHByb2plY3RcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBQcm9qZWN0LmNyZWF0ZSh7IG5hbWU6IHByb2plY3ROYW1lIH0pXG4gICAgICAgICAgICBwcm9qZWN0SWQgPSBwcm9qZWN0LmlkXG5cbiAgICAgICAgICAgIHByb2plY3QuY3JlYXRvciA9IGlkXG5cblxuICAgICAgICAgICAgYXdhaXQgcHJvamVjdC5zYXZlKClcbiAgICAgICAgfSlcblxuICAgICAgICBpdCgnc2hvdWxkIHN1Y2NlZWQgb24gcmV0cmlldmUgcHJvamVjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGF3YWl0IHJldHJpZXZlUHJvamVjdHMoaWQpXG5cbiAgICAgICAgICAgIGV4cGVjdChwcm9qZWN0cykudG8uYmUuYW4oJ2FycmF5JylcbiAgICAgICAgICAgIGV4cGVjdChwcm9qZWN0cykudG8uYmUuZXhpc3RcbiAgICAgICAgICAgIGV4cGVjdChwcm9qZWN0SWQpLnRvLmV4aXN0XG4gICAgICAgICAgICBleHBlY3QocHJvamVjdHNbMF0uY3JlYXRvci50b1N0cmluZygpKS50by5iZS5lcXVhbChpZClcbiAgICAgICAgICAgIGV4cGVjdChwcm9qZWN0c1swXS5uYW1lKS50by5iZS5lcXVhbChwcm9qZWN0TmFtZSlcbiAgICAgICAgICAgIGV4cGVjdChwcm9qZWN0c1swXS5jcmVhdGVkKS50by5iZS5hbi5pbnN0YW5jZU9mKERhdGUpXG4gICAgICAgICAgICBleHBlY3QocHJvamVjdHNbMF0uaWQpLnRvLmJlLmVxdWFsKHByb2plY3RJZClcbiAgICAgICAgfSlcblxuICAgIH0pXG5cbiAgICBkZXNjcmliZSgnd2hlbiB1c2VyIGRvZXMgbm90IGV4aXN0JywgKCkgPT4ge1xuICAgICAgICBsZXQgX2lkLCBwcm9qZWN0SWRcblxuICAgICAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIGNyZWFtb3MgdXNlci5cbiAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IFVzZXIuY3JlYXRlKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0pXG4gICAgICAgICAgICBfaWQgPSBpZFxuXG4gICAgICAgICAgICAvLyBjcmVhbW9zIHByb2plY3QuXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgUHJvamVjdC5jcmVhdGUoeyBuYW1lOiBwcm9qZWN0TmFtZSB9KVxuICAgICAgICAgICAgcHJvamVjdElkID0gcHJvamVjdC5pZFxuXG4gICAgICAgICAgICBwcm9qZWN0LmNyZWF0b3IgPSBfaWRcblxuICAgICAgICAgICAgYXdhaXQgcHJvamVjdC5zYXZlKClcblxuICAgICAgICAgICAgLy8gZWxpbWluYW1vcyBlbCB1c2VyLlxuICAgICAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KClcblxuICAgICAgICB9KVxuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgZmFpbCBhbmQgdGhyb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgcmV0cmlldmVQcm9qZWN0cyhfaWQsIHByb2plY3RJZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIHByb2plY3RzJylcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5leGlzdFxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uYmUuYW4uaW5zdGFuY2VPZihFcnJvcilcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uYmUuZXF1YWwoJ25vIHByb2plY3RzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgZGVzY3JpYmUoJ3doZW4gcHJvamVjdCBkb2VzIG5vdCBleGlzdCcsICgpID0+IHtcbiAgICAgICAgbGV0IF9pZCwgcHJvamVjdElkXG5cbiAgICAgICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBjcmVhbW9zIHVzZXIuXG4gICAgICAgICAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCBVc2VyLmNyZWF0ZSh7IG5hbWUsIGVtYWlsLCBwYXNzd29yZCB9KVxuICAgICAgICAgICAgX2lkID0gaWRcblxuICAgICAgICAgICAgLy8gY3JlYW1vcyBwcm9qZWN0LlxuICAgICAgICAgICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IFByb2plY3QuY3JlYXRlKHsgbmFtZTogcHJvamVjdE5hbWUgfSlcbiAgICAgICAgICAgIHByb2plY3RJZCA9IHByb2plY3QuaWRcblxuICAgICAgICAgICAgcHJvamVjdC5jcmVhdG9yID0gX2lkXG5cbiAgICAgICAgICAgIGF3YWl0IHByb2plY3Quc2F2ZSgpXG5cbiAgICAgICAgICAgIC8vIGVsaW1pbmFtb3MgZWwgcHJvamVjdC5cbiAgICAgICAgICAgIGF3YWl0IFByb2plY3QuZGVsZXRlTWFueSgpXG5cbiAgICAgICAgfSlcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGZhaWwgYW5kIHRocm93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGF3YWl0IHJldHJpZXZlUHJvamVjdHMoX2lkLCBwcm9qZWN0SWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBwcm9qZWN0cycpXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvcikudG8uYmUuZXhpc3RcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IpLnRvLmJlLmFuLmluc3RhbmNlT2YoRXJyb3IpXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmJlLmVxdWFsKCdubyBwcm9qZWN0cycpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGFmdGVyKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgW1VzZXIuZGVsZXRlTWFueSgpLCBQcm9qZWN0LmRlbGV0ZU1hbnkoKV1cbiAgICAgICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpXG4gICAgfSlcbn0pIl19