function cov_aniwphy48(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/authenticate-user.spec.js";var hash="338bd10f580706a1379864a212c7ffb2ba5cd5e6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/authenticate-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:2,column:19},end:{line:2,column:34}},"2":{start:{line:3,column:38},end:{line:3,column:45}},"3":{start:{line:4,column:39},end:{line:4,column:63}},"4":{start:{line:6,column:15},end:{line:6,column:32}},"5":{start:{line:7,column:19},end:{line:7,column:23}},"6":{start:{line:9,column:25},end:{line:9,column:55}},"7":{start:{line:12,column:0},end:{line:155,column:2}},"8":{start:{line:15,column:1},end:{line:18,column:3}},"9":{start:{line:16,column:2},end:{line:16,column:95}},"10":{start:{line:17,column:2},end:{line:17,column:25}},"11":{start:{line:20,column:1},end:{line:24,column:3}},"12":{start:{line:21,column:2},end:{line:21,column:27}},"13":{start:{line:22,column:2},end:{line:22,column:38}},"14":{start:{line:23,column:2},end:{line:23,column:35}},"15":{start:{line:26,column:1},end:{line:74,column:3}},"16":{start:{line:29,column:2},end:{line:36,column:4}},"17":{start:{line:31,column:21},end:{line:31,column:52}},"18":{start:{line:33,column:16},end:{line:33,column:71}},"19":{start:{line:35,column:3},end:{line:35,column:15}},"20":{start:{line:38,column:2},end:{line:45,column:4}},"21":{start:{line:39,column:14},end:{line:39,column:53}},"22":{start:{line:41,column:3},end:{line:41,column:25}},"23":{start:{line:42,column:3},end:{line:42,column:32}},"24":{start:{line:43,column:3},end:{line:43,column:29}},"25":{start:{line:44,column:3},end:{line:44,column:41}},"26":{start:{line:47,column:2},end:{line:58,column:4}},"27":{start:{line:48,column:20},end:{line:48,column:31}},"28":{start:{line:50,column:3},end:{line:57,column:4}},"29":{start:{line:51,column:4},end:{line:51,column:48}},"30":{start:{line:52,column:4},end:{line:52,column:66}},"31":{start:{line:55,column:4},end:{line:55,column:43}},"32":{start:{line:56,column:4},end:{line:56,column:84}},"33":{start:{line:60,column:2},end:{line:72,column:4}},"34":{start:{line:62,column:23},end:{line:62,column:33}},"35":{start:{line:64,column:3},end:{line:71,column:4}},"36":{start:{line:65,column:4},end:{line:65,column:48}},"37":{start:{line:66,column:4},end:{line:66,column:40}},"38":{start:{line:69,column:4},end:{line:69,column:43}},"39":{start:{line:70,column:4},end:{line:70,column:58}},"40":{start:{line:76,column:1},end:{line:93,column:3}},"41":{start:{line:77,column:2},end:{line:80,column:4}},"42":{start:{line:79,column:3},end:{line:79,column:26}},"43":{start:{line:82,column:2},end:{line:91,column:4}},"44":{start:{line:83,column:3},end:{line:90,column:4}},"45":{start:{line:84,column:4},end:{line:84,column:43}},"46":{start:{line:85,column:4},end:{line:85,column:61}},"47":{start:{line:88,column:4},end:{line:88,column:44}},"48":{start:{line:89,column:4},end:{line:89,column:79}},"49":{start:{line:151,column:1},end:{line:154,column:3}},"50":{start:{line:152,column:2},end:{line:152,column:25}},"51":{start:{line:153,column:2},end:{line:153,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:29},end:{line:12,column:30}},loc:{start:{line:12,column:35},end:{line:155,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:8},end:{line:15,column:9}},loc:{start:{line:15,column:20},end:{line:18,column:2}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:12},end:{line:20,column:13}},loc:{start:{line:20,column:18},end:{line:24,column:2}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:26,column:29},end:{line:26,column:30}},loc:{start:{line:26,column:35},end:{line:74,column:2}},line:26},"4":{name:"(anonymous_4)",decl:{start:{line:29,column:13},end:{line:29,column:14}},loc:{start:{line:29,column:25},end:{line:36,column:3}},line:29},"5":{name:"(anonymous_5)",decl:{start:{line:38,column:66},end:{line:38,column:67}},loc:{start:{line:38,column:78},end:{line:45,column:3}},line:38},"6":{name:"(anonymous_6)",decl:{start:{line:47,column:39},end:{line:47,column:40}},loc:{start:{line:47,column:51},end:{line:58,column:3}},line:47},"7":{name:"(anonymous_7)",decl:{start:{line:60,column:42},end:{line:60,column:43}},loc:{start:{line:60,column:54},end:{line:72,column:3}},line:60},"8":{name:"(anonymous_8)",decl:{start:{line:76,column:36},end:{line:76,column:37}},loc:{start:{line:76,column:42},end:{line:93,column:2}},line:76},"9":{name:"(anonymous_9)",decl:{start:{line:77,column:13},end:{line:77,column:14}},loc:{start:{line:77,column:25},end:{line:80,column:3}},line:77},"10":{name:"(anonymous_10)",decl:{start:{line:82,column:30},end:{line:82,column:31}},loc:{start:{line:82,column:42},end:{line:91,column:3}},line:82},"11":{name:"(anonymous_11)",decl:{start:{line:151,column:7},end:{line:151,column:8}},loc:{start:{line:151,column:19},end:{line:154,column:2}},line:151}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"338bd10f580706a1379864a212c7ffb2ba5cd5e6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_aniwphy48=function(){return actualCoverage;};}return actualCoverage;}cov_aniwphy48();cov_aniwphy48().s[0]++;require('dotenv').config();const{expect}=(cov_aniwphy48().s[1]++,require('chai'));const{env:{TEST_MONGODB_URL}}=(cov_aniwphy48().s[2]++,process);const{mongoose,models:{User}}=(cov_aniwphy48().s[3]++,require('serntask-data'));const bcrypt=(cov_aniwphy48().s[4]++,require('bcrypt'));const{random}=(cov_aniwphy48().s[5]++,Math);const authenticateUser=(cov_aniwphy48().s[6]++,require('./authenticate-user'));cov_aniwphy48().s[7]++;describe('authenticateUser',()=>{cov_aniwphy48().f[0]++;let name,email,password;cov_aniwphy48().s[8]++;before(async()=>{cov_aniwphy48().f[1]++;cov_aniwphy48().s[9]++;await mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true});cov_aniwphy48().s[10]++;await User.deleteMany();});cov_aniwphy48().s[11]++;beforeEach(()=>{cov_aniwphy48().f[2]++;cov_aniwphy48().s[12]++;name=`name-${random()}`;cov_aniwphy48().s[13]++;email=`email-${random()}@mail.com`;cov_aniwphy48().s[14]++;password=`password-${random()}`;});cov_aniwphy48().s[15]++;describe('when user exist',()=>{cov_aniwphy48().f[3]++;let id;cov_aniwphy48().s[16]++;beforeEach(async()=>{cov_aniwphy48().f[4]++;// creamos a user
const _password=(cov_aniwphy48().s[17]++,await bcrypt.hash(password,10));const user=(cov_aniwphy48().s[18]++,await User.create({name,email,password:_password}));cov_aniwphy48().s[19]++;id=user.id;});cov_aniwphy48().s[20]++;it('should succeed on correct and valid and right credentials',async()=>{cov_aniwphy48().f[5]++;const id=(cov_aniwphy48().s[21]++,await authenticateUser(email,password));cov_aniwphy48().s[22]++;expect(id).to.be.exist;cov_aniwphy48().s[23]++;expect(id).to.be.an('string');cov_aniwphy48().s[24]++;expect(id).to.be.equal(id);cov_aniwphy48().s[25]++;expect(id.length).to.be.greaterThan(0);});cov_aniwphy48().s[26]++;it('should fail on incorrect email',async()=>{cov_aniwphy48().f[6]++;let wrongEmail=(cov_aniwphy48().s[27]++,'userdlrjl');cov_aniwphy48().s[28]++;try{cov_aniwphy48().s[29]++;await authenticateUser(wrongEmail,password);cov_aniwphy48().s[30]++;throw new Error(`User with email: ${wrongEmail} do not exist`);}catch(error){cov_aniwphy48().s[31]++;expect(error).to.be.a.instanceOf(Error);cov_aniwphy48().s[32]++;expect(error.message).to.be.equal(`User with email: ${wrongEmail} do not exist`);}});cov_aniwphy48().s[33]++;it('should fail on incorrect password',async()=>{cov_aniwphy48().f[7]++;let wrongPassword=(cov_aniwphy48().s[34]++,'di468hkc');cov_aniwphy48().s[35]++;try{cov_aniwphy48().s[36]++;await authenticateUser(email,wrongPassword);cov_aniwphy48().s[37]++;throw new Error('wrong credentials');}catch(error){cov_aniwphy48().s[38]++;expect(error).to.be.a.instanceOf(Error);cov_aniwphy48().s[39]++;expect(error.message).to.be.equal('wrong credentials');}});});cov_aniwphy48().s[40]++;describe('when user do not exist',()=>{cov_aniwphy48().f[8]++;cov_aniwphy48().s[41]++;beforeEach(async()=>{cov_aniwphy48().f[9]++;cov_aniwphy48().s[42]++;// eliminamos al user
await User.deleteMany();});cov_aniwphy48().s[43]++;it('should fail and throw',async()=>{cov_aniwphy48().f[10]++;cov_aniwphy48().s[44]++;try{cov_aniwphy48().s[45]++;await authenticateUser(email,password);cov_aniwphy48().s[46]++;throw new Error(`User with email: ${email} do not exist`);}catch(error){cov_aniwphy48().s[47]++;expect(error).to.be.an.instanceOf(Error);cov_aniwphy48().s[48]++;expect(error.message).to.be.equal(`User with email: ${email} do not exist`);}});});// En este caso no tiene lugar. Esto lo valida express-validator. Syncrono.
// it('should fail on non-string or empty password', () => {
// 	password = 1;
// 	expect(() => authenticateUser(email, password)).to.throw(
// 		TypeError,
// 		`password ${password} is not a string`
// 	);
// 	password = true;
// 	expect(() => authenticateUser(email, password)).to.throw(
// 		TypeError,
// 		`password ${password} is not a string`
// 	);
// 	password = {};
// 	expect(() => authenticateUser(email, password)).to.throw(
// 		TypeError,
// 		`password ${password} is not a string`
// 	);
// 	password = '';
// 	expect(() => authenticateUser(email, password)).to.throw(
// 		Error,
// 		`password is empty`
// 	);
// });
// it('should fail on non-string or empty email', () => {
// 	email = 1;
// 	expect(() => authenticateUser(email, password)).to.throw(
// 		TypeError,
// 		`email ${email} is not a string`
// 	);
// 	email = true;
// 	expect(() => authenticateUser(email, password)).to.throw(
// 		TypeError,
// 		`email ${email} is not a string`
// 	);
// 	email = {};
// 	expect(() => authenticateUser(email, password)).to.throw(
// 		TypeError,
// 		`email ${email} is not a string`
// 	);
// 	email = '';
// 	expect(() => authenticateUser(email, password)).to.throw(
// 		Error,
// 		`email is empty`
// 	);
// });
cov_aniwphy48().s[49]++;after(async()=>{cov_aniwphy48().f[11]++;cov_aniwphy48().s[50]++;await User.deleteMany();cov_aniwphy48().s[51]++;await mongoose.disconnect();});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZS11c2VyLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImV4cGVjdCIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiYmNyeXB0IiwicmFuZG9tIiwiTWF0aCIsImF1dGhlbnRpY2F0ZVVzZXIiLCJkZXNjcmliZSIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiYmVmb3JlIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImRlbGV0ZU1hbnkiLCJiZWZvcmVFYWNoIiwiaWQiLCJfcGFzc3dvcmQiLCJoYXNoIiwidXNlciIsImNyZWF0ZSIsIml0IiwidG8iLCJiZSIsImV4aXN0IiwiYW4iLCJlcXVhbCIsImxlbmd0aCIsImdyZWF0ZXJUaGFuIiwid3JvbmdFbWFpbCIsIkVycm9yIiwiZXJyb3IiLCJhIiwiaW5zdGFuY2VPZiIsIm1lc3NhZ2UiLCJ3cm9uZ1Bhc3N3b3JkIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoia29MQWVZO2dIQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUNBLEtBQU0sQ0FBRUMsTUFBRiwwQkFBYUYsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUcsR0FBRyxDQUFFLENBQUVDLGdCQUFGLENBQVAsMEJBQWdDQyxPQUFoQyxDQUFOLENBQ0EsS0FBTSxDQUFFQyxRQUFGLENBQVlDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQXBCLDBCQUFpQ1IsT0FBTyxDQUFDLGVBQUQsQ0FBeEMsQ0FBTixDQUVBLEtBQU1TLENBQUFBLE1BQU0seUJBQUdULE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDQUNBLEtBQU0sQ0FBRVUsTUFBRiwwQkFBYUMsSUFBYixDQUFOLENBRUEsS0FBTUMsQ0FBQUEsZ0JBQWdCLHlCQUFHWixPQUFP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QyxLQUFLLENBQUNHLE9BQVAsQ0FBTixDQUFzQlosRUFBdEIsQ0FBeUJDLEVBQXpCLENBQTRCRyxLQUE1QixDQUFtQyxvQkFBbUJsQixLQUFNLGVBQTVELEVBQ0EsQ0FDRCxDQVRDLENBQUYsQ0FXQSxDQWpCTyxDQUFSLENBbUJBO0FBRUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZJa0Msd0JBMklsQzRCLEtBQUssQ0FBQyxTQUFZLGlEQUNqQixLQUFNbkMsQ0FBQUEsSUFBSSxDQUFDYSxVQUFMLEVBQU4sQ0FEaUIsd0JBRWpCLEtBQU1mLENBQUFBLFFBQVEsQ0FBQ3NDLFVBQVQsRUFBTixDQUNBLENBSEksQ0FBTCxDQUlBLENBL0lPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTCB9IH0gPSBwcm9jZXNzXG5jb25zdCB7IG1vbmdvb3NlLCBtb2RlbHM6IHsgVXNlciB9IH0gPSByZXF1aXJlKCdzZXJudGFzay1kYXRhJylcblxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0JylcbmNvbnN0IHsgcmFuZG9tIH0gPSBNYXRoXG5cbmNvbnN0IGF1dGhlbnRpY2F0ZVVzZXIgPSByZXF1aXJlKCcuL2F1dGhlbnRpY2F0ZS11c2VyJylcblxuXG5kZXNjcmliZSgnYXV0aGVudGljYXRlVXNlcicsICgpID0+IHtcblx0bGV0IG5hbWUsIGVtYWlsLCBwYXNzd29yZFxuXG5cdGJlZm9yZShhc3luYyAoKSA9PiB7XG5cdFx0YXdhaXQgbW9uZ29vc2UuY29ubmVjdChURVNUX01PTkdPREJfVVJMLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pXG5cdFx0YXdhaXQgVXNlci5kZWxldGVNYW55KClcblx0fSlcblxuXHRiZWZvcmVFYWNoKCgpID0+IHtcblx0XHRuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXG5cdFx0ZW1haWwgPSBgZW1haWwtJHtyYW5kb20oKX1AbWFpbC5jb21gXG5cdFx0cGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cdH0pXG5cblx0ZGVzY3JpYmUoJ3doZW4gdXNlciBleGlzdCcsICgpID0+IHtcblx0XHRsZXQgaWRcblxuXHRcdGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuXHRcdFx0Ly8gY3JlYW1vcyBhIHVzZXJcblx0XHRcdGNvbnN0IF9wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcblx0XHRcdFxuXHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkOiBfcGFzc3dvcmQgfSlcblxuXHRcdFx0aWQgPSB1c2VyLmlkIFxuXHRcdH0pXG5cblx0XHRpdCgnc2hvdWxkIHN1Y2NlZWQgb24gY29ycmVjdCBhbmQgdmFsaWQgYW5kIHJpZ2h0IGNyZWRlbnRpYWxzJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgaWQgPSBhd2FpdCBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZClcblx0XHRcdFxuXHRcdFx0ZXhwZWN0KGlkKS50by5iZS5leGlzdFxuXHRcdFx0ZXhwZWN0KGlkKS50by5iZS5hbignc3RyaW5nJylcblx0XHRcdGV4cGVjdChpZCkudG8uYmUuZXF1YWwoaWQpXG5cdFx0XHRleHBlY3QoaWQubGVuZ3RoKS50by5iZS5ncmVhdGVyVGhhbigwKVxuXHRcdH0pXG5cblx0XHRpdCgnc2hvdWxkIGZhaWwgb24gaW5jb3JyZWN0IGVtYWlsJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0bGV0IHdyb25nRW1haWwgPSAndXNlcmRscmpsJ1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBhdXRoZW50aWNhdGVVc2VyKHdyb25nRW1haWwsIHBhc3N3b3JkKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVzZXIgd2l0aCBlbWFpbDogJHt3cm9uZ0VtYWlsfSBkbyBub3QgZXhpc3RgKVxuXG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRleHBlY3QoZXJyb3IpLnRvLmJlLmEuaW5zdGFuY2VPZihFcnJvcilcblx0XHRcdFx0ZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmJlLmVxdWFsKGBVc2VyIHdpdGggZW1haWw6ICR7d3JvbmdFbWFpbH0gZG8gbm90IGV4aXN0YClcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0aXQoJ3Nob3VsZCBmYWlsIG9uIGluY29ycmVjdCBwYXNzd29yZCcsIGFzeW5jICgpID0+IHtcblxuXHRcdFx0bGV0IHdyb25nUGFzc3dvcmQgPSAnZGk0Njhoa2MnXG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHdyb25nUGFzc3dvcmQpXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignd3JvbmcgY3JlZGVudGlhbHMnKVxuXG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRleHBlY3QoZXJyb3IpLnRvLmJlLmEuaW5zdGFuY2VPZihFcnJvcilcblx0XHRcdFx0ZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmJlLmVxdWFsKCd3cm9uZyBjcmVkZW50aWFscycpXG5cdFx0XHR9XG5cdFx0fSlcblx0XHRcblx0fSlcblxuXHRkZXNjcmliZSgnd2hlbiB1c2VyIGRvIG5vdCBleGlzdCcsICgpID0+IHtcblx0XHRiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcblx0XHRcdC8vIGVsaW1pbmFtb3MgYWwgdXNlclxuXHRcdFx0YXdhaXQgVXNlci5kZWxldGVNYW55KClcblx0XHR9KVxuXG5cdFx0aXQoJ3Nob3VsZCBmYWlsIGFuZCB0aHJvdycsIGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVzZXIgd2l0aCBlbWFpbDogJHtlbWFpbH0gZG8gbm90IGV4aXN0YClcblxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0ZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZU9mKEVycm9yKVxuXHRcdFx0XHRleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uYmUuZXF1YWwoYFVzZXIgd2l0aCBlbWFpbDogJHtlbWFpbH0gZG8gbm90IGV4aXN0YClcblx0XHRcdH1cblx0XHR9KVxuXG5cdH0pXG5cblx0Ly8gRW4gZXN0ZSBjYXNvIG5vIHRpZW5lIGx1Z2FyLiBFc3RvIGxvIHZhbGlkYSBleHByZXNzLXZhbGlkYXRvci4gU3luY3Jvbm8uXG5cbiAgICAvLyBpdCgnc2hvdWxkIGZhaWwgb24gbm9uLXN0cmluZyBvciBlbXB0eSBwYXNzd29yZCcsICgpID0+IHtcblx0Ly8gXHRwYXNzd29yZCA9IDE7XG5cdC8vIFx0ZXhwZWN0KCgpID0+IGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKSkudG8udGhyb3coXG5cdC8vIFx0XHRUeXBlRXJyb3IsXG5cdC8vIFx0XHRgcGFzc3dvcmQgJHtwYXNzd29yZH0gaXMgbm90IGEgc3RyaW5nYFxuXHQvLyBcdCk7XG5cblx0Ly8gXHRwYXNzd29yZCA9IHRydWU7XG5cdC8vIFx0ZXhwZWN0KCgpID0+IGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKSkudG8udGhyb3coXG5cdC8vIFx0XHRUeXBlRXJyb3IsXG5cdC8vIFx0XHRgcGFzc3dvcmQgJHtwYXNzd29yZH0gaXMgbm90IGEgc3RyaW5nYFxuXHQvLyBcdCk7XG5cblx0Ly8gXHRwYXNzd29yZCA9IHt9O1xuXHQvLyBcdGV4cGVjdCgoKSA9PiBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZCkpLnRvLnRocm93KFxuXHQvLyBcdFx0VHlwZUVycm9yLFxuXHQvLyBcdFx0YHBhc3N3b3JkICR7cGFzc3dvcmR9IGlzIG5vdCBhIHN0cmluZ2Bcblx0Ly8gXHQpO1xuXG5cdC8vIFx0cGFzc3dvcmQgPSAnJztcblx0Ly8gXHRleHBlY3QoKCkgPT4gYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpKS50by50aHJvdyhcblx0Ly8gXHRcdEVycm9yLFxuXHQvLyBcdFx0YHBhc3N3b3JkIGlzIGVtcHR5YFxuXHQvLyBcdCk7XG5cdC8vIH0pO1xuXG5cdC8vIGl0KCdzaG91bGQgZmFpbCBvbiBub24tc3RyaW5nIG9yIGVtcHR5IGVtYWlsJywgKCkgPT4ge1xuXHQvLyBcdGVtYWlsID0gMTtcblx0Ly8gXHRleHBlY3QoKCkgPT4gYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpKS50by50aHJvdyhcblx0Ly8gXHRcdFR5cGVFcnJvcixcblx0Ly8gXHRcdGBlbWFpbCAke2VtYWlsfSBpcyBub3QgYSBzdHJpbmdgXG5cdC8vIFx0KTtcblxuXHQvLyBcdGVtYWlsID0gdHJ1ZTtcblx0Ly8gXHRleHBlY3QoKCkgPT4gYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpKS50by50aHJvdyhcblx0Ly8gXHRcdFR5cGVFcnJvcixcblx0Ly8gXHRcdGBlbWFpbCAke2VtYWlsfSBpcyBub3QgYSBzdHJpbmdgXG5cdC8vIFx0KTtcblxuXHQvLyBcdGVtYWlsID0ge307XG5cdC8vIFx0ZXhwZWN0KCgpID0+IGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKSkudG8udGhyb3coXG5cdC8vIFx0XHRUeXBlRXJyb3IsXG5cdC8vIFx0XHRgZW1haWwgJHtlbWFpbH0gaXMgbm90IGEgc3RyaW5nYFxuXHQvLyBcdCk7XG5cblx0Ly8gXHRlbWFpbCA9ICcnO1xuXHQvLyBcdGV4cGVjdCgoKSA9PiBhdXRoZW50aWNhdGVVc2VyKGVtYWlsLCBwYXNzd29yZCkpLnRvLnRocm93KFxuXHQvLyBcdFx0RXJyb3IsXG5cdC8vIFx0XHRgZW1haWwgaXMgZW1wdHlgXG5cdC8vIFx0KTtcblx0Ly8gfSk7XG5cbiAgICBcblxuXHRhZnRlcihhc3luYyAoKSA9PiB7XG5cdFx0YXdhaXQgVXNlci5kZWxldGVNYW55KClcblx0XHRhd2FpdCBtb25nb29zZS5kaXNjb25uZWN0KClcblx0fSlcbn0pIl19