function cov_2gbdb91qpc(){var path="/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/delete-task.js";var hash="69c2ea9d9b4682f1923b74588cf62cbfb7f51e13";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/sergibittangonzalez/Desktop/SERNtask/serntask-server/logic/delete-task.js",statementMap:{"0":{start:{line:1,column:38},end:{line:1,column:62}},"1":{start:{line:4,column:19},end:{line:16,column:1}},"2":{start:{line:6,column:4},end:{line:15,column:8}},"3":{start:{line:7,column:25},end:{line:7,column:56}},"4":{start:{line:9,column:8},end:{line:9,column:79}},"5":{start:{line:9,column:23},end:{line:9,column:79}},"6":{start:{line:10,column:8},end:{line:10,column:81}},"7":{start:{line:10,column:48},end:{line:10,column:81}},"8":{start:{line:12,column:8},end:{line:12,column:44}},"9":{start:{line:14,column:8},end:{line:14,column:14}},"10":{start:{line:18,column:0},end:{line:18,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:44},end:{line:16,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:6,column:12},end:{line:6,column:13}},loc:{start:{line:6,column:24},end:{line:15,column:5}},line:6}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:9,column:79}},type:"if",locations:[{start:{line:9,column:8},end:{line:9,column:79}},{start:{line:9,column:8},end:{line:9,column:79}}],line:9},"1":{loc:{start:{line:10,column:8},end:{line:10,column:81}},type:"if",locations:[{start:{line:10,column:8},end:{line:10,column:81}},{start:{line:10,column:8},end:{line:10,column:81}}],line:10}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"69c2ea9d9b4682f1923b74588cf62cbfb7f51e13"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2gbdb91qpc=function(){return actualCoverage;};}return actualCoverage;}cov_2gbdb91qpc();const{models:{Project,Task}}=(cov_2gbdb91qpc().s[0]++,require('serntask-data'));cov_2gbdb91qpc().s[1]++;const deleteTask=(id,project,taskId)=>{cov_2gbdb91qpc().f[0]++;cov_2gbdb91qpc().s[2]++;return(async()=>{cov_2gbdb91qpc().f[1]++;const _project=(cov_2gbdb91qpc().s[3]++,await Project.findById(project));cov_2gbdb91qpc().s[4]++;if(!_project){cov_2gbdb91qpc().b[0][0]++;cov_2gbdb91qpc().s[5]++;throw new Error(`project with id: ${project} not found`);}else{cov_2gbdb91qpc().b[0][1]++;}cov_2gbdb91qpc().s[6]++;if(_project.creator.toString()!==id){cov_2gbdb91qpc().b[1][0]++;cov_2gbdb91qpc().s[7]++;throw new Error('Not authorized');}else{cov_2gbdb91qpc().b[1][1]++;}cov_2gbdb91qpc().s[8]++;await Task.findByIdAndRemove(taskId);cov_2gbdb91qpc().s[9]++;return;})();};cov_2gbdb91qpc().s[10]++;module.exports=deleteTask;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbGV0ZS10YXNrLmpzIl0sIm5hbWVzIjpbIm1vZGVscyIsIlByb2plY3QiLCJUYXNrIiwicmVxdWlyZSIsImRlbGV0ZVRhc2siLCJpZCIsInByb2plY3QiLCJ0YXNrSWQiLCJfcHJvamVjdCIsImZpbmRCeUlkIiwiRXJyb3IiLCJjcmVhdG9yIiwidG9TdHJpbmciLCJmaW5kQnlJZEFuZFJlbW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI2OURBZVk7MkZBZlosS0FBTSxDQUFFQSxNQUFNLENBQUUsQ0FBRUMsT0FBRixDQUFXQyxJQUFYLENBQVYsMkJBQWdDQyxPQUFPLENBQUMsZUFBRCxDQUF2QyxDQUFOLEMsd0JBR0EsS0FBTUMsQ0FBQUEsVUFBVSxDQUFHLENBQUNDLEVBQUQsQ0FBS0MsT0FBTCxDQUFjQyxNQUFkLEdBQXlCLGlEQUV4QyxNQUFPLENBQUMsU0FBWSx5QkFDaEIsS0FBTUMsQ0FBQUEsUUFBUSwwQkFBRyxLQUFNUCxDQUFBQSxPQUFPLENBQUNRLFFBQVIsQ0FBaUJILE9BQWpCLENBQVQsQ0FBZCxDQURnQix3QkFHaEIsR0FBSSxDQUFDRSxRQUFMLENBQWUseURBQU0sSUFBSUUsQ0FBQUEsS0FBSixDQUFXLG9CQUFtQkosT0FBUSxZQUF0QyxDQUFOLENBQXdELENBQXZFLGlDQUhnQix3QkFJaEIsR0FBSUUsUUFBUSxDQUFDRyxPQUFULENBQWlCQyxRQUFqQixLQUFnQ1AsRUFBcEMsQ0FBd0MseURBQU0sSUFBSUssQ0FBQUEsS0FBSixDQUFVLGdCQUFWLENBQU4sQ0FBaUMsQ0FBekUsaUNBSmdCLHdCQU1oQixLQUFNUixDQUFBQSxJQUFJLENBQUNXLGlCQUFMLENBQXVCTixNQUF2QixDQUFOLENBTmdCLHdCQVFoQixPQUNILENBVE0sR0FBUCxDQVVILENBWkQsQyx5QkFjQU8sTUFBTSxDQUFDQyxPQUFQLENBQWlCWCxVQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgbW9kZWxzOiB7IFByb2plY3QsIFRhc2sgfSB9ID0gcmVxdWlyZSgnc2VybnRhc2stZGF0YScpXG5cblxuY29uc3QgZGVsZXRlVGFzayA9IChpZCwgcHJvamVjdCwgdGFza0lkKSA9PiB7XG5cbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgX3Byb2plY3QgPSBhd2FpdCBQcm9qZWN0LmZpbmRCeUlkKHByb2plY3QpXG5cbiAgICAgICAgaWYgKCFfcHJvamVjdCkgdGhyb3cgbmV3IEVycm9yKGBwcm9qZWN0IHdpdGggaWQ6ICR7cHJvamVjdH0gbm90IGZvdW5kYClcbiAgICAgICAgaWYgKF9wcm9qZWN0LmNyZWF0b3IudG9TdHJpbmcoKSAhPT0gaWQpIHRocm93IG5ldyBFcnJvcignTm90IGF1dGhvcml6ZWQnKVxuXG4gICAgICAgIGF3YWl0IFRhc2suZmluZEJ5SWRBbmRSZW1vdmUodGFza0lkKVxuXG4gICAgICAgIHJldHVyblxuICAgIH0pKClcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWxldGVUYXNrIl19